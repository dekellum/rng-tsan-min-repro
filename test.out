    Finished dev [unoptimized + debuginfo] target(s) in 0.02s
     Running target/debug/deps/rng_tsan_min_repro-9cc6eb5b2bde4095

running 1 test
==================
WARNING: ThreadSanitizer: data race (pid=3645)
  Read of size 8 at 0x5625217b0040 by thread T3:
    #0 lazy_static::lazy::Lazy<T>::get /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/lazy_static-1.3.0/src/inline_lazy.rs:35 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x11cc98)
    #1 <c2_chacha::guts::init_chacha::IMPL as core::ops::deref::Deref>::deref::__stability /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/c2-chacha-0.2.2/<::lazy_static::__lazy_static_internal macros>:17 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x11cc98)
    #2 <c2_chacha::guts::init_chacha::IMPL as core::ops::deref::Deref>::deref /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/c2-chacha-0.2.2/<::lazy_static::__lazy_static_internal macros>:19 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x11cc98)
    #3 c2_chacha::guts::init_chacha /home/david/src/rng-tsan-min-repro/<::ppv_lite86::x86_64::dispatch_light128 macros>:35 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x182c0)
    #4 c2_chacha::guts::ChaCha::new /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/c2-chacha-0.2.2/src/guts.rs:60 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x182c0)
    #5 <rand_chacha::chacha::ChaCha8Core as rand_core::SeedableRng>::from_seed /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand_chacha-0.2.1/src/chacha.rs:94 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x182c0)
    #6 <rand_chacha::chacha::ChaCha8Rng as rand_core::SeedableRng>::from_seed /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand_chacha-0.2.1/src/chacha.rs:145 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x1819b)
    #7 rand_core::SeedableRng::seed_from_u64 /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand_core-0.5.0/src/lib.rs:328 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x1940d)
    #8 rng_tsan_min_repro::tests::hammer::{{closure}}::{{closure}} /home/david/src/rng-tsan-min-repro/src/lib.rs:13 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x27954)
    #9 std::sys_common::backtrace::__rust_begin_short_backtrace /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/sys_common/backtrace.rs:77 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x26b99)
    #10 std::thread::Builder::spawn_unchecked::{{closure}}::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:470 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x22e19)
    #11 <std::panic::AssertUnwindSafe<F> as core::ops::function::FnOnce<()>>::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/panic.rs:315 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x1f859)
    #12 std::panicking::try::do_call /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/panicking.rs:296 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x266bb)
    #13 __rust_maybe_catch_panic /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba//src/libpanic_unwind/lib.rs:80 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x156949)
    #14 std::panic::catch_unwind /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/panic.rs:394 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x1f8b9)
    #15 std::thread::Builder::spawn_unchecked::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:469 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x22c0d)
    #16 core::ops::function::FnOnce::call_once{{vtable-shim}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/ops/function.rs:235 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x156d9)
    #17 <alloc::boxed::Box<F> as core::ops::function::FnOnce<A>>::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/boxed.rs:770 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x14930e)

  Previous write of size 8 at 0x5625217b0040 by thread T2:
    #0 memcpy /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/llvm-project/compiler-rt/lib/tsan/../sanitizer_common/sanitizer_common_interceptors.inc:801 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x39a87)
    #1 core::intrinsics::copy_nonoverlapping /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/intrinsics.rs:1441 (rng_tsan_min_repro-9cc6eb5b2bde4095+0xd9582)
    #2 core::ptr::swap_nonoverlapping_one /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/ptr/mod.rs:389 (rng_tsan_min_repro-9cc6eb5b2bde4095+0xe0a86)
    #3 core::mem::swap /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/mem/mod.rs:500 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x11ce31)
    #4 core::mem::replace /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/mem/mod.rs:628 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x11d443)
    #5 core::cell::Cell<T>::replace /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/cell.rs:430 (rng_tsan_min_repro-9cc6eb5b2bde4095+0xdaf30)
    #6 core::cell::Cell<T>::set /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/cell.rs:387 (rng_tsan_min_repro-9cc6eb5b2bde4095+0xdada1)
    #7 lazy_static::lazy::Lazy<T>::get::{{closure}} /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/lazy_static-1.3.0/src/inline_lazy.rs:28 (rng_tsan_min_repro-9cc6eb5b2bde4095+0xdf08d)
    #8 std::sync::once::Once::call_once::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/sync/once.rs:225 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x13b860)
    #9 std::sync::once::Once::call_inner /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba//src/libstd/sync/once.rs:392 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x150707)
    #10 lazy_static::lazy::Lazy<T>::get /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/lazy_static-1.3.0/src/inline_lazy.rs:27 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x11cc5b)
    #11 <c2_chacha::guts::init_chacha::IMPL as core::ops::deref::Deref>::deref::__stability /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/c2-chacha-0.2.2/<::lazy_static::__lazy_static_internal macros>:17 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x11cc5b)
    #12 <c2_chacha::guts::init_chacha::IMPL as core::ops::deref::Deref>::deref /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/c2-chacha-0.2.2/<::lazy_static::__lazy_static_internal macros>:19 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x11cc5b)
    #13 c2_chacha::guts::init_chacha /home/david/src/rng-tsan-min-repro/<::ppv_lite86::x86_64::dispatch_light128 macros>:35 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x182c0)
    #14 c2_chacha::guts::ChaCha::new /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/c2-chacha-0.2.2/src/guts.rs:60 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x182c0)
    #15 <rand_chacha::chacha::ChaCha8Core as rand_core::SeedableRng>::from_seed /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand_chacha-0.2.1/src/chacha.rs:94 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x182c0)
    #16 <rand_chacha::chacha::ChaCha8Rng as rand_core::SeedableRng>::from_seed /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand_chacha-0.2.1/src/chacha.rs:145 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x1819b)
    #17 rand_core::SeedableRng::seed_from_u64 /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand_core-0.5.0/src/lib.rs:328 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x1940d)
    #18 rng_tsan_min_repro::tests::hammer::{{closure}}::{{closure}} /home/david/src/rng-tsan-min-repro/src/lib.rs:13 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x27954)
    #19 std::sys_common::backtrace::__rust_begin_short_backtrace /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/sys_common/backtrace.rs:77 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x26b99)
    #20 std::thread::Builder::spawn_unchecked::{{closure}}::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:470 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x22e19)
    #21 <std::panic::AssertUnwindSafe<F> as core::ops::function::FnOnce<()>>::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/panic.rs:315 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x1f859)
    #22 std::panicking::try::do_call /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/panicking.rs:296 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x266bb)
    #23 __rust_maybe_catch_panic /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba//src/libpanic_unwind/lib.rs:80 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x156949)
    #24 std::panic::catch_unwind /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/panic.rs:394 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x1f8b9)
    #25 std::thread::Builder::spawn_unchecked::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:469 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x22c0d)
    #26 core::ops::function::FnOnce::call_once{{vtable-shim}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/ops/function.rs:235 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x156d9)
    #27 <alloc::boxed::Box<F> as core::ops::function::FnOnce<A>>::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/boxed.rs:770 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x14930e)

  Location is global '<null>' at 0x000000000000 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x000000bf2040)

  Thread T3 (tid=3649, running) created by thread T1 at:
    #0 pthread_create /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/llvm-project/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:967 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x2f7db)
    #1 std::sys::unix::thread::Thread::new /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba//src/libstd/sys/unix/thread.rs:67 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x15592d)
    #2 std::thread::Builder::spawn /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:382 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x22eb6)
    #3 std::thread::spawn /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:613 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x2229c)
    #4 rng_tsan_min_repro::tests::hammer::{{closure}} /home/david/src/rng-tsan-min-repro/src/lib.rs:12 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x27ac4)
    #5 <core::iter::adapters::Map<I,F> as core::iter::traits::iterator::Iterator>::fold::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/adapters/mod.rs:589 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x299e5)
    #6 core::iter::traits::iterator::Iterator::fold::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1783 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x21f67)
    #7 core::iter::traits::iterator::Iterator::try_fold /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1671 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x19ee1)
    #8 core::iter::traits::iterator::Iterator::fold /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1783 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x19dd3)
    #9 <core::iter::adapters::Map<I,F> as core::iter::traits::iterator::Iterator>::fold /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/adapters/mod.rs:589 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x29939)
    #10 core::iter::traits::iterator::Iterator::for_each /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:602 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x297b3)
    #11 <alloc::vec::Vec<T> as alloc::vec::SpecExtend<T,I>>::spec_extend /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/vec.rs:1961 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x1baf0)
    #12 <alloc::vec::Vec<T> as alloc::vec::SpecExtend<T,I>>::from_iter /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/vec.rs:1944 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x1bcde)
    #13 <alloc::vec::Vec<T> as core::iter::traits::collect::FromIterator<T>>::from_iter /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/vec.rs:1831 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x1c4fa)
    #14 core::iter::traits::iterator::Iterator::collect /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1464 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x296ff)
    #15 rng_tsan_min_repro::tests::hammer /home/david/src/rng-tsan-min-repro/src/lib.rs:12 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x15384)
    #16 rng_tsan_min_repro::tests::hammer::{{closure}} /home/david/src/rng-tsan-min-repro/src/lib.rs:11 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x278e4)
    #17 core::ops::function::FnOnce::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/ops/function.rs:235 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x15817)
    #18 <alloc::boxed::Box<F> as core::ops::function::FnOnce<A>>::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/boxed.rs:770 (rng_tsan_min_repro-9cc6eb5b2bde4095+0xa746e)

  Thread T2 (tid=3648, running) created by thread T1 at:
    #0 pthread_create /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/llvm-project/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:967 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x2f7db)
    #1 std::sys::unix::thread::Thread::new /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba//src/libstd/sys/unix/thread.rs:67 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x15592d)
    #2 std::thread::Builder::spawn /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:382 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x22eb6)
    #3 std::thread::spawn /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:613 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x2229c)
    #4 rng_tsan_min_repro::tests::hammer::{{closure}} /home/david/src/rng-tsan-min-repro/src/lib.rs:12 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x27ac4)
    #5 <core::iter::adapters::Map<I,F> as core::iter::traits::iterator::Iterator>::fold::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/adapters/mod.rs:589 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x299e5)
    #6 core::iter::traits::iterator::Iterator::fold::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1783 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x21f67)
    #7 core::iter::traits::iterator::Iterator::try_fold /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1671 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x19ee1)
    #8 core::iter::traits::iterator::Iterator::fold /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1783 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x19dd3)
    #9 <core::iter::adapters::Map<I,F> as core::iter::traits::iterator::Iterator>::fold /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/adapters/mod.rs:589 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x29939)
    #10 core::iter::traits::iterator::Iterator::for_each /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:602 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x297b3)
    #11 <alloc::vec::Vec<T> as alloc::vec::SpecExtend<T,I>>::spec_extend /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/vec.rs:1961 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x1baf0)
    #12 <alloc::vec::Vec<T> as alloc::vec::SpecExtend<T,I>>::from_iter /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/vec.rs:1944 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x1bcde)
    #13 <alloc::vec::Vec<T> as core::iter::traits::collect::FromIterator<T>>::from_iter /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/vec.rs:1831 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x1c4fa)
    #14 core::iter::traits::iterator::Iterator::collect /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1464 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x296ff)
    #15 rng_tsan_min_repro::tests::hammer /home/david/src/rng-tsan-min-repro/src/lib.rs:12 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x15384)
    #16 rng_tsan_min_repro::tests::hammer::{{closure}} /home/david/src/rng-tsan-min-repro/src/lib.rs:11 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x278e4)
    #17 core::ops::function::FnOnce::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/ops/function.rs:235 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x15817)
    #18 <alloc::boxed::Box<F> as core::ops::function::FnOnce<A>>::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/boxed.rs:770 (rng_tsan_min_repro-9cc6eb5b2bde4095+0xa746e)

SUMMARY: ThreadSanitizer: data race /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/lazy_static-1.3.0/src/inline_lazy.rs:35 in lazy_static::lazy::Lazy<T>::get
==================
==================
WARNING: ThreadSanitizer: data race (pid=3645)
  Read of size 8 at 0x5625217b0030 by thread T3:
    #0 lazy_static::lazy::Lazy<T>::get /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/lazy_static-1.3.0/src/inline_lazy.rs:35 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x11b2e8)
    #1 <c2_chacha::guts::refill_wide::IMPL as core::ops::deref::Deref>::deref::__stability /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/c2-chacha-0.2.2/<::lazy_static::__lazy_static_internal macros>:17 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x11b2e8)
    #2 <c2_chacha::guts::refill_wide::IMPL as core::ops::deref::Deref>::deref /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/c2-chacha-0.2.2/<::lazy_static::__lazy_static_internal macros>:19 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x11b2e8)
    #3 c2_chacha::guts::refill_wide /home/david/src/rng-tsan-min-repro/<::ppv_lite86::x86_64::dispatch macros>:66 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x18437)
    #4 c2_chacha::guts::ChaCha::refill4 /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/c2-chacha-0.2.2/src/guts.rs:109 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x18437)
    #5 <rand_chacha::chacha::ChaCha8Core as rand_core::block::BlockRngCore>::generate /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand_chacha-0.2.1/src/chacha.rs:81 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x18437)
    #6 rand_core::block::BlockRng<R>::generate_and_set /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand_core-0.5.0/src/block.rs:166 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x18ed5)
    #7 <rand_core::block::BlockRng<R> as rand_core::RngCore>::next_u64 /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand_core-0.5.0/src/block.rs:207 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x18849)
    #8 <rand_chacha::chacha::ChaCha8Rng as rand_core::RngCore>::next_u64 /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand_chacha-0.2.1/src/chacha.rs:159 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x18109)
    #9 rng_tsan_min_repro::tests::hammer::{{closure}}::{{closure}} /home/david/src/rng-tsan-min-repro/src/lib.rs:14 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x27983)
    #10 std::sys_common::backtrace::__rust_begin_short_backtrace /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/sys_common/backtrace.rs:77 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x26b99)
    #11 std::thread::Builder::spawn_unchecked::{{closure}}::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:470 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x22e19)
    #12 <std::panic::AssertUnwindSafe<F> as core::ops::function::FnOnce<()>>::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/panic.rs:315 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x1f859)
    #13 std::panicking::try::do_call /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/panicking.rs:296 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x266bb)
    #14 __rust_maybe_catch_panic /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba//src/libpanic_unwind/lib.rs:80 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x156949)
    #15 std::panic::catch_unwind /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/panic.rs:394 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x1f8b9)
    #16 std::thread::Builder::spawn_unchecked::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:469 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x22c0d)
    #17 core::ops::function::FnOnce::call_once{{vtable-shim}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/ops/function.rs:235 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x156d9)
    #18 <alloc::boxed::Box<F> as core::ops::function::FnOnce<A>>::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/boxed.rs:770 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x14930e)

  Previous write of size 8 at 0x5625217b0030 by thread T2:
    #0 memcpy /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/llvm-project/compiler-rt/lib/tsan/../sanitizer_common/sanitizer_common_interceptors.inc:801 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x39a87)
    #1 core::intrinsics::copy_nonoverlapping /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/intrinsics.rs:1441 (rng_tsan_min_repro-9cc6eb5b2bde4095+0xd9c12)
    #2 core::ptr::swap_nonoverlapping_one /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/ptr/mod.rs:389 (rng_tsan_min_repro-9cc6eb5b2bde4095+0xe0d26)
    #3 core::mem::swap /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/mem/mod.rs:500 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x11cdc1)
    #4 core::mem::replace /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/mem/mod.rs:628 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x11d2e3)
    #5 core::cell::Cell<T>::replace /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/cell.rs:430 (rng_tsan_min_repro-9cc6eb5b2bde4095+0xdaff0)
    #6 core::cell::Cell<T>::set /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/cell.rs:387 (rng_tsan_min_repro-9cc6eb5b2bde4095+0xdad11)
    #7 lazy_static::lazy::Lazy<T>::get::{{closure}} /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/lazy_static-1.3.0/src/inline_lazy.rs:28 (rng_tsan_min_repro-9cc6eb5b2bde4095+0xdefed)
    #8 std::sync::once::Once::call_once::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/sync/once.rs:225 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x13b7b0)
    #9 std::sync::once::Once::call_inner /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba//src/libstd/sync/once.rs:392 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x150707)
    #10 lazy_static::lazy::Lazy<T>::get /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/lazy_static-1.3.0/src/inline_lazy.rs:27 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x11b2ab)
    #11 <c2_chacha::guts::refill_wide::IMPL as core::ops::deref::Deref>::deref::__stability /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/c2-chacha-0.2.2/<::lazy_static::__lazy_static_internal macros>:17 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x11b2ab)
    #12 <c2_chacha::guts::refill_wide::IMPL as core::ops::deref::Deref>::deref /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/c2-chacha-0.2.2/<::lazy_static::__lazy_static_internal macros>:19 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x11b2ab)
    #13 c2_chacha::guts::refill_wide /home/david/src/rng-tsan-min-repro/<::ppv_lite86::x86_64::dispatch macros>:66 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x18437)
    #14 c2_chacha::guts::ChaCha::refill4 /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/c2-chacha-0.2.2/src/guts.rs:109 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x18437)
    #15 <rand_chacha::chacha::ChaCha8Core as rand_core::block::BlockRngCore>::generate /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand_chacha-0.2.1/src/chacha.rs:81 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x18437)
    #16 rand_core::block::BlockRng<R>::generate_and_set /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand_core-0.5.0/src/block.rs:166 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x18ed5)
    #17 <rand_core::block::BlockRng<R> as rand_core::RngCore>::next_u64 /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand_core-0.5.0/src/block.rs:207 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x18849)
    #18 <rand_chacha::chacha::ChaCha8Rng as rand_core::RngCore>::next_u64 /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand_chacha-0.2.1/src/chacha.rs:159 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x18109)
    #19 rng_tsan_min_repro::tests::hammer::{{closure}}::{{closure}} /home/david/src/rng-tsan-min-repro/src/lib.rs:14 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x27983)
    #20 std::sys_common::backtrace::__rust_begin_short_backtrace /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/sys_common/backtrace.rs:77 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x26b99)
    #21 std::thread::Builder::spawn_unchecked::{{closure}}::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:470 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x22e19)
    #22 <std::panic::AssertUnwindSafe<F> as core::ops::function::FnOnce<()>>::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/panic.rs:315 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x1f859)
    #23 std::panicking::try::do_call /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/panicking.rs:296 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x266bb)
    #24 __rust_maybe_catch_panic /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba//src/libpanic_unwind/lib.rs:80 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x156949)
    #25 std::panic::catch_unwind /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/panic.rs:394 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x1f8b9)
    #26 std::thread::Builder::spawn_unchecked::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:469 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x22c0d)
    #27 core::ops::function::FnOnce::call_once{{vtable-shim}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/ops/function.rs:235 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x156d9)
    #28 <alloc::boxed::Box<F> as core::ops::function::FnOnce<A>>::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/boxed.rs:770 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x14930e)

  Location is global '<null>' at 0x000000000000 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x000000bf2030)

  Thread T3 (tid=3649, running) created by thread T1 at:
    #0 pthread_create /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/llvm-project/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:967 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x2f7db)
    #1 std::sys::unix::thread::Thread::new /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba//src/libstd/sys/unix/thread.rs:67 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x15592d)
    #2 std::thread::Builder::spawn /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:382 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x22eb6)
    #3 std::thread::spawn /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:613 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x2229c)
    #4 rng_tsan_min_repro::tests::hammer::{{closure}} /home/david/src/rng-tsan-min-repro/src/lib.rs:12 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x27ac4)
    #5 <core::iter::adapters::Map<I,F> as core::iter::traits::iterator::Iterator>::fold::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/adapters/mod.rs:589 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x299e5)
    #6 core::iter::traits::iterator::Iterator::fold::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1783 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x21f67)
    #7 core::iter::traits::iterator::Iterator::try_fold /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1671 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x19ee1)
    #8 core::iter::traits::iterator::Iterator::fold /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1783 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x19dd3)
    #9 <core::iter::adapters::Map<I,F> as core::iter::traits::iterator::Iterator>::fold /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/adapters/mod.rs:589 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x29939)
    #10 core::iter::traits::iterator::Iterator::for_each /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:602 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x297b3)
    #11 <alloc::vec::Vec<T> as alloc::vec::SpecExtend<T,I>>::spec_extend /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/vec.rs:1961 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x1baf0)
    #12 <alloc::vec::Vec<T> as alloc::vec::SpecExtend<T,I>>::from_iter /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/vec.rs:1944 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x1bcde)
    #13 <alloc::vec::Vec<T> as core::iter::traits::collect::FromIterator<T>>::from_iter /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/vec.rs:1831 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x1c4fa)
    #14 core::iter::traits::iterator::Iterator::collect /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1464 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x296ff)
    #15 rng_tsan_min_repro::tests::hammer /home/david/src/rng-tsan-min-repro/src/lib.rs:12 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x15384)
    #16 rng_tsan_min_repro::tests::hammer::{{closure}} /home/david/src/rng-tsan-min-repro/src/lib.rs:11 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x278e4)
    #17 core::ops::function::FnOnce::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/ops/function.rs:235 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x15817)
    #18 <alloc::boxed::Box<F> as core::ops::function::FnOnce<A>>::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/boxed.rs:770 (rng_tsan_min_repro-9cc6eb5b2bde4095+0xa746e)

  Thread T2 (tid=3648, running) created by thread T1 at:
    #0 pthread_create /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/llvm-project/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:967 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x2f7db)
    #1 std::sys::unix::thread::Thread::new /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba//src/libstd/sys/unix/thread.rs:67 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x15592d)
    #2 std::thread::Builder::spawn /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:382 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x22eb6)
    #3 std::thread::spawn /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:613 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x2229c)
    #4 rng_tsan_min_repro::tests::hammer::{{closure}} /home/david/src/rng-tsan-min-repro/src/lib.rs:12 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x27ac4)
    #5 <core::iter::adapters::Map<I,F> as core::iter::traits::iterator::Iterator>::fold::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/adapters/mod.rs:589 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x299e5)
    #6 core::iter::traits::iterator::Iterator::fold::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1783 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x21f67)
    #7 core::iter::traits::iterator::Iterator::try_fold /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1671 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x19ee1)
    #8 core::iter::traits::iterator::Iterator::fold /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1783 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x19dd3)
    #9 <core::iter::adapters::Map<I,F> as core::iter::traits::iterator::Iterator>::fold /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/adapters/mod.rs:589 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x29939)
    #10 core::iter::traits::iterator::Iterator::for_each /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:602 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x297b3)
    #11 <alloc::vec::Vec<T> as alloc::vec::SpecExtend<T,I>>::spec_extend /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/vec.rs:1961 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x1baf0)
    #12 <alloc::vec::Vec<T> as alloc::vec::SpecExtend<T,I>>::from_iter /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/vec.rs:1944 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x1bcde)
    #13 <alloc::vec::Vec<T> as core::iter::traits::collect::FromIterator<T>>::from_iter /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/vec.rs:1831 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x1c4fa)
    #14 core::iter::traits::iterator::Iterator::collect /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1464 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x296ff)
    #15 rng_tsan_min_repro::tests::hammer /home/david/src/rng-tsan-min-repro/src/lib.rs:12 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x15384)
    #16 rng_tsan_min_repro::tests::hammer::{{closure}} /home/david/src/rng-tsan-min-repro/src/lib.rs:11 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x278e4)
    #17 core::ops::function::FnOnce::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/ops/function.rs:235 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x15817)
    #18 <alloc::boxed::Box<F> as core::ops::function::FnOnce<A>>::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/boxed.rs:770 (rng_tsan_min_repro-9cc6eb5b2bde4095+0xa746e)

SUMMARY: ThreadSanitizer: data race /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/lazy_static-1.3.0/src/inline_lazy.rs:35 in lazy_static::lazy::Lazy<T>::get
==================
==================
WARNING: ThreadSanitizer: data race (pid=3645)
  Read of size 8 at 0x5625217b0030 by thread T4:
    #0 lazy_static::lazy::Lazy<T>::get /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/lazy_static-1.3.0/src/inline_lazy.rs:35 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x11b2e8)
    #1 <c2_chacha::guts::refill_wide::IMPL as core::ops::deref::Deref>::deref::__stability /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/c2-chacha-0.2.2/<::lazy_static::__lazy_static_internal macros>:17 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x11b2e8)
    #2 <c2_chacha::guts::refill_wide::IMPL as core::ops::deref::Deref>::deref /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/c2-chacha-0.2.2/<::lazy_static::__lazy_static_internal macros>:19 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x11b2e8)
    #3 c2_chacha::guts::refill_wide /home/david/src/rng-tsan-min-repro/<::ppv_lite86::x86_64::dispatch macros>:66 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x18437)
    #4 c2_chacha::guts::ChaCha::refill4 /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/c2-chacha-0.2.2/src/guts.rs:109 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x18437)
    #5 <rand_chacha::chacha::ChaCha8Core as rand_core::block::BlockRngCore>::generate /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand_chacha-0.2.1/src/chacha.rs:81 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x18437)
    #6 rand_core::block::BlockRng<R>::generate_and_set /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand_core-0.5.0/src/block.rs:166 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x18ed5)
    #7 <rand_core::block::BlockRng<R> as rand_core::RngCore>::next_u64 /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand_core-0.5.0/src/block.rs:207 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x18849)
    #8 <rand_chacha::chacha::ChaCha8Rng as rand_core::RngCore>::next_u64 /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand_chacha-0.2.1/src/chacha.rs:159 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x18109)
    #9 rng_tsan_min_repro::tests::hammer::{{closure}}::{{closure}} /home/david/src/rng-tsan-min-repro/src/lib.rs:14 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x27983)
    #10 std::sys_common::backtrace::__rust_begin_short_backtrace /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/sys_common/backtrace.rs:77 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x26b99)
    #11 std::thread::Builder::spawn_unchecked::{{closure}}::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:470 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x22e19)
    #12 <std::panic::AssertUnwindSafe<F> as core::ops::function::FnOnce<()>>::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/panic.rs:315 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x1f859)
    #13 std::panicking::try::do_call /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/panicking.rs:296 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x266bb)
    #14 __rust_maybe_catch_panic /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba//src/libpanic_unwind/lib.rs:80 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x156949)
    #15 std::panic::catch_unwind /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/panic.rs:394 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x1f8b9)
    #16 std::thread::Builder::spawn_unchecked::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:469 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x22c0d)
    #17 core::ops::function::FnOnce::call_once{{vtable-shim}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/ops/function.rs:235 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x156d9)
    #18 <alloc::boxed::Box<F> as core::ops::function::FnOnce<A>>::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/boxed.rs:770 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x14930e)

  Previous write of size 8 at 0x5625217b0030 by thread T2:
    #0 memcpy /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/llvm-project/compiler-rt/lib/tsan/../sanitizer_common/sanitizer_common_interceptors.inc:801 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x39a87)
    #1 core::intrinsics::copy_nonoverlapping /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/intrinsics.rs:1441 (rng_tsan_min_repro-9cc6eb5b2bde4095+0xd9c12)
    #2 core::ptr::swap_nonoverlapping_one /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/ptr/mod.rs:389 (rng_tsan_min_repro-9cc6eb5b2bde4095+0xe0d26)
    #3 core::mem::swap /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/mem/mod.rs:500 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x11cdc1)
    #4 core::mem::replace /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/mem/mod.rs:628 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x11d2e3)
    #5 core::cell::Cell<T>::replace /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/cell.rs:430 (rng_tsan_min_repro-9cc6eb5b2bde4095+0xdaff0)
    #6 core::cell::Cell<T>::set /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/cell.rs:387 (rng_tsan_min_repro-9cc6eb5b2bde4095+0xdad11)
    #7 lazy_static::lazy::Lazy<T>::get::{{closure}} /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/lazy_static-1.3.0/src/inline_lazy.rs:28 (rng_tsan_min_repro-9cc6eb5b2bde4095+0xdefed)
    #8 std::sync::once::Once::call_once::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/sync/once.rs:225 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x13b7b0)
    #9 std::sync::once::Once::call_inner /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba//src/libstd/sync/once.rs:392 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x150707)
    #10 lazy_static::lazy::Lazy<T>::get /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/lazy_static-1.3.0/src/inline_lazy.rs:27 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x11b2ab)
    #11 <c2_chacha::guts::refill_wide::IMPL as core::ops::deref::Deref>::deref::__stability /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/c2-chacha-0.2.2/<::lazy_static::__lazy_static_internal macros>:17 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x11b2ab)
    #12 <c2_chacha::guts::refill_wide::IMPL as core::ops::deref::Deref>::deref /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/c2-chacha-0.2.2/<::lazy_static::__lazy_static_internal macros>:19 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x11b2ab)
    #13 c2_chacha::guts::refill_wide /home/david/src/rng-tsan-min-repro/<::ppv_lite86::x86_64::dispatch macros>:66 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x18437)
    #14 c2_chacha::guts::ChaCha::refill4 /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/c2-chacha-0.2.2/src/guts.rs:109 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x18437)
    #15 <rand_chacha::chacha::ChaCha8Core as rand_core::block::BlockRngCore>::generate /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand_chacha-0.2.1/src/chacha.rs:81 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x18437)
    #16 rand_core::block::BlockRng<R>::generate_and_set /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand_core-0.5.0/src/block.rs:166 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x18ed5)
    #17 <rand_core::block::BlockRng<R> as rand_core::RngCore>::next_u64 /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand_core-0.5.0/src/block.rs:207 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x18849)
    #18 <rand_chacha::chacha::ChaCha8Rng as rand_core::RngCore>::next_u64 /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand_chacha-0.2.1/src/chacha.rs:159 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x18109)
    #19 rng_tsan_min_repro::tests::hammer::{{closure}}::{{closure}} /home/david/src/rng-tsan-min-repro/src/lib.rs:14 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x27983)
    #20 std::sys_common::backtrace::__rust_begin_short_backtrace /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/sys_common/backtrace.rs:77 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x26b99)
    #21 std::thread::Builder::spawn_unchecked::{{closure}}::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:470 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x22e19)
    #22 <std::panic::AssertUnwindSafe<F> as core::ops::function::FnOnce<()>>::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/panic.rs:315 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x1f859)
    #23 std::panicking::try::do_call /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/panicking.rs:296 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x266bb)
    #24 __rust_maybe_catch_panic /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba//src/libpanic_unwind/lib.rs:80 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x156949)
    #25 std::panic::catch_unwind /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/panic.rs:394 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x1f8b9)
    #26 std::thread::Builder::spawn_unchecked::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:469 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x22c0d)
    #27 core::ops::function::FnOnce::call_once{{vtable-shim}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/ops/function.rs:235 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x156d9)
    #28 <alloc::boxed::Box<F> as core::ops::function::FnOnce<A>>::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/boxed.rs:770 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x14930e)

  Location is global '<null>' at 0x000000000000 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x000000bf2030)

  Thread T4 (tid=3650, running) created by thread T1 at:
    #0 pthread_create /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/llvm-project/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:967 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x2f7db)
    #1 std::sys::unix::thread::Thread::new /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba//src/libstd/sys/unix/thread.rs:67 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x15592d)
    #2 std::thread::Builder::spawn /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:382 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x22eb6)
    #3 std::thread::spawn /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:613 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x2229c)
    #4 rng_tsan_min_repro::tests::hammer::{{closure}} /home/david/src/rng-tsan-min-repro/src/lib.rs:12 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x27ac4)
    #5 <core::iter::adapters::Map<I,F> as core::iter::traits::iterator::Iterator>::fold::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/adapters/mod.rs:589 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x299e5)
    #6 core::iter::traits::iterator::Iterator::fold::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1783 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x21f67)
    #7 core::iter::traits::iterator::Iterator::try_fold /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1671 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x19ee1)
    #8 core::iter::traits::iterator::Iterator::fold /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1783 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x19dd3)
    #9 <core::iter::adapters::Map<I,F> as core::iter::traits::iterator::Iterator>::fold /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/adapters/mod.rs:589 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x29939)
    #10 core::iter::traits::iterator::Iterator::for_each /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:602 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x297b3)
    #11 <alloc::vec::Vec<T> as alloc::vec::SpecExtend<T,I>>::spec_extend /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/vec.rs:1961 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x1baf0)
    #12 <alloc::vec::Vec<T> as alloc::vec::SpecExtend<T,I>>::from_iter /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/vec.rs:1944 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x1bcde)
    #13 <alloc::vec::Vec<T> as core::iter::traits::collect::FromIterator<T>>::from_iter /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/vec.rs:1831 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x1c4fa)
    #14 core::iter::traits::iterator::Iterator::collect /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1464 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x296ff)
    #15 rng_tsan_min_repro::tests::hammer /home/david/src/rng-tsan-min-repro/src/lib.rs:12 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x15384)
    #16 rng_tsan_min_repro::tests::hammer::{{closure}} /home/david/src/rng-tsan-min-repro/src/lib.rs:11 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x278e4)
    #17 core::ops::function::FnOnce::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/ops/function.rs:235 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x15817)
    #18 <alloc::boxed::Box<F> as core::ops::function::FnOnce<A>>::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/boxed.rs:770 (rng_tsan_min_repro-9cc6eb5b2bde4095+0xa746e)

  Thread T2 (tid=3648, finished) created by thread T1 at:
    #0 pthread_create /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/llvm-project/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:967 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x2f7db)
    #1 std::sys::unix::thread::Thread::new /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba//src/libstd/sys/unix/thread.rs:67 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x15592d)
    #2 std::thread::Builder::spawn /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:382 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x22eb6)
    #3 std::thread::spawn /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:613 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x2229c)
    #4 rng_tsan_min_repro::tests::hammer::{{closure}} /home/david/src/rng-tsan-min-repro/src/lib.rs:12 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x27ac4)
    #5 <core::iter::adapters::Map<I,F> as core::iter::traits::iterator::Iterator>::fold::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/adapters/mod.rs:589 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x299e5)
    #6 core::iter::traits::iterator::Iterator::fold::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1783 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x21f67)
    #7 core::iter::traits::iterator::Iterator::try_fold /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1671 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x19ee1)
    #8 core::iter::traits::iterator::Iterator::fold /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1783 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x19dd3)
    #9 <core::iter::adapters::Map<I,F> as core::iter::traits::iterator::Iterator>::fold /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/adapters/mod.rs:589 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x29939)
    #10 core::iter::traits::iterator::Iterator::for_each /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:602 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x297b3)
    #11 <alloc::vec::Vec<T> as alloc::vec::SpecExtend<T,I>>::spec_extend /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/vec.rs:1961 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x1baf0)
    #12 <alloc::vec::Vec<T> as alloc::vec::SpecExtend<T,I>>::from_iter /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/vec.rs:1944 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x1bcde)
    #13 <alloc::vec::Vec<T> as core::iter::traits::collect::FromIterator<T>>::from_iter /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/vec.rs:1831 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x1c4fa)
    #14 core::iter::traits::iterator::Iterator::collect /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1464 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x296ff)
    #15 rng_tsan_min_repro::tests::hammer /home/david/src/rng-tsan-min-repro/src/lib.rs:12 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x15384)
    #16 rng_tsan_min_repro::tests::hammer::{{closure}} /home/david/src/rng-tsan-min-repro/src/lib.rs:11 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x278e4)
    #17 core::ops::function::FnOnce::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/ops/function.rs:235 (rng_tsan_min_repro-9cc6eb5b2bde4095+0x15817)
    #18 <alloc::boxed::Box<F> as core::ops::function::FnOnce<A>>::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/boxed.rs:770 (rng_tsan_min_repro-9cc6eb5b2bde4095+0xa746e)

SUMMARY: ThreadSanitizer: data race /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/lazy_static-1.3.0/src/inline_lazy.rs:35 in lazy_static::lazy::Lazy<T>::get
==================
test tests::hammer ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out

ThreadSanitizer: reported 3 warnings
error: test failed, to rerun pass '--lib'
