    Finished dev [unoptimized + debuginfo] target(s) in 0.01s
     Running target/debug/deps/rng_tsan_min_repro-6bc72839c6f31b66

running 1 test
==================
WARNING: ThreadSanitizer: data race (pid=28325)
  Read of size 8 at 0x559290ec6050 by thread T3:
    #0 lazy_static::lazy::Lazy<T>::get /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/lazy_static-1.3.0/src/inline_lazy.rs:35 (rng_tsan_min_repro-6bc72839c6f31b66+0x1235d8)
    #1 <c2_chacha::guts::init_chacha::IMPL as core::ops::deref::Deref>::deref::__stability /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/c2-chacha-0.2.2/<::lazy_static::__lazy_static_internal macros>:17 (rng_tsan_min_repro-6bc72839c6f31b66+0x1235d8)
    #2 <c2_chacha::guts::init_chacha::IMPL as core::ops::deref::Deref>::deref /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/c2-chacha-0.2.2/<::lazy_static::__lazy_static_internal macros>:19 (rng_tsan_min_repro-6bc72839c6f31b66+0x1235d8)
    #3 c2_chacha::guts::init_chacha /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.7.0/<::ppv_lite86::x86_64::dispatch_light128 macros>:35 (rng_tsan_min_repro-6bc72839c6f31b66+0xd7a30)
    #4 c2_chacha::guts::ChaCha::new /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/c2-chacha-0.2.2/src/guts.rs:60 (rng_tsan_min_repro-6bc72839c6f31b66+0xd7a30)
    #5 <rand_chacha::chacha::ChaCha20Core as rand_core::SeedableRng>::from_seed /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand_chacha-0.2.1/src/chacha.rs:94 (rng_tsan_min_repro-6bc72839c6f31b66+0xd7a30)
    #6 rand_core::SeedableRng::from_rng /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand_core-0.5.0/src/lib.rs:359 (rng_tsan_min_repro-6bc72839c6f31b66+0xd835a)
    #7 rand::rngs::thread::THREAD_RNG_KEY::__init /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.7.0/src/rngs/thread.rs:64 (rng_tsan_min_repro-6bc72839c6f31b66+0xde031)
    #8 core::ops::function::FnOnce::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/ops/function.rs:235 (rng_tsan_min_repro-6bc72839c6f31b66+0xdb1b7)
    #9 std::thread::local::lazy::LazyKeyInner<T>::initialize /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/local.rs:285 (rng_tsan_min_repro-6bc72839c6f31b66+0xd73ae)
    #10 std::thread::local::fast::Key<T>::try_initialize /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/local.rs:426 (rng_tsan_min_repro-6bc72839c6f31b66+0xde5bd)
    #11 std::thread::local::fast::Key<T>::get /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/local.rs:411 (rng_tsan_min_repro-6bc72839c6f31b66+0xde79c)
    #12 rand::rngs::thread::THREAD_RNG_KEY::__getit /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.7.0/<::std::thread::local::__thread_local_inner macros>:28 (rng_tsan_min_repro-6bc72839c6f31b66+0xde279)
    #13 std::thread::local::LocalKey<T>::try_with /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/local.rs:254 (rng_tsan_min_repro-6bc72839c6f31b66+0xde3a1)
    #14 std::thread::local::LocalKey<T>::with /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/local.rs:234 (rng_tsan_min_repro-6bc72839c6f31b66+0xde2ed)
    #15 rand::rngs::thread::thread_rng /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.7.0/src/rngs/thread.rs:81 (rng_tsan_min_repro-6bc72839c6f31b66+0xddefd)
    #16 rng_tsan_min_repro::tests::hammer::{{closure}}::{{closure}} /home/david/src/rng-tsan-min-repo/src/lib.rs:13 (rng_tsan_min_repro-6bc72839c6f31b66+0x20496)
    #17 std::sys_common::backtrace::__rust_begin_short_backtrace /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/sys_common/backtrace.rs:77 (rng_tsan_min_repro-6bc72839c6f31b66+0x27d62)
    #18 std::thread::Builder::spawn_unchecked::{{closure}}::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:470 (rng_tsan_min_repro-6bc72839c6f31b66+0x19202)
    #19 <std::panic::AssertUnwindSafe<F> as core::ops::function::FnOnce<()>>::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/panic.rs:315 (rng_tsan_min_repro-6bc72839c6f31b66+0x1e302)
    #20 std::panicking::try::do_call /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/panicking.rs:296 (rng_tsan_min_repro-6bc72839c6f31b66+0x218b6)
    #21 __rust_maybe_catch_panic /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba//src/libpanic_unwind/lib.rs:80 (rng_tsan_min_repro-6bc72839c6f31b66+0x1692f9)
    #22 std::panic::catch_unwind /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/panic.rs:394 (rng_tsan_min_repro-6bc72839c6f31b66+0x1e342)
    #23 std::thread::Builder::spawn_unchecked::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:469 (rng_tsan_min_repro-6bc72839c6f31b66+0x1902a)
    #24 core::ops::function::FnOnce::call_once{{vtable-shim}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/ops/function.rs:235 (rng_tsan_min_repro-6bc72839c6f31b66+0x16c0d)
    #25 <alloc::boxed::Box<F> as core::ops::function::FnOnce<A>>::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/boxed.rs:770 (rng_tsan_min_repro-6bc72839c6f31b66+0x15bc1e)

  Previous write of size 8 at 0x559290ec6050 by thread T2:
    #0 memcpy /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/llvm-project/compiler-rt/lib/tsan/../sanitizer_common/sanitizer_common_interceptors.inc:801 (rng_tsan_min_repro-6bc72839c6f31b66+0x37ac7)
    #1 core::intrinsics::copy_nonoverlapping /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/intrinsics.rs:1441 (rng_tsan_min_repro-6bc72839c6f31b66+0xdfec2)
    #2 core::ptr::swap_nonoverlapping_one /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/ptr/mod.rs:389 (rng_tsan_min_repro-6bc72839c6f31b66+0xe73c6)
    #3 core::mem::swap /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/mem/mod.rs:500 (rng_tsan_min_repro-6bc72839c6f31b66+0x123771)
    #4 core::mem::replace /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/mem/mod.rs:628 (rng_tsan_min_repro-6bc72839c6f31b66+0x123d83)
    #5 core::cell::Cell<T>::replace /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/cell.rs:430 (rng_tsan_min_repro-6bc72839c6f31b66+0xe1870)
    #6 core::cell::Cell<T>::set /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/cell.rs:387 (rng_tsan_min_repro-6bc72839c6f31b66+0xe16e1)
    #7 lazy_static::lazy::Lazy<T>::get::{{closure}} /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/lazy_static-1.3.0/src/inline_lazy.rs:28 (rng_tsan_min_repro-6bc72839c6f31b66+0xe59cd)
    #8 std::sync::once::Once::call_once::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/sync/once.rs:225 (rng_tsan_min_repro-6bc72839c6f31b66+0x1421a0)
    #9 std::sync::once::Once::call_inner /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba//src/libstd/sync/once.rs:392 (rng_tsan_min_repro-6bc72839c6f31b66+0x163077)
    #10 lazy_static::lazy::Lazy<T>::get /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/lazy_static-1.3.0/src/inline_lazy.rs:27 (rng_tsan_min_repro-6bc72839c6f31b66+0x12359b)
    #11 <c2_chacha::guts::init_chacha::IMPL as core::ops::deref::Deref>::deref::__stability /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/c2-chacha-0.2.2/<::lazy_static::__lazy_static_internal macros>:17 (rng_tsan_min_repro-6bc72839c6f31b66+0x12359b)
    #12 <c2_chacha::guts::init_chacha::IMPL as core::ops::deref::Deref>::deref /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/c2-chacha-0.2.2/<::lazy_static::__lazy_static_internal macros>:19 (rng_tsan_min_repro-6bc72839c6f31b66+0x12359b)
    #13 c2_chacha::guts::init_chacha /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.7.0/<::ppv_lite86::x86_64::dispatch_light128 macros>:35 (rng_tsan_min_repro-6bc72839c6f31b66+0xd7a30)
    #14 c2_chacha::guts::ChaCha::new /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/c2-chacha-0.2.2/src/guts.rs:60 (rng_tsan_min_repro-6bc72839c6f31b66+0xd7a30)
    #15 <rand_chacha::chacha::ChaCha20Core as rand_core::SeedableRng>::from_seed /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand_chacha-0.2.1/src/chacha.rs:94 (rng_tsan_min_repro-6bc72839c6f31b66+0xd7a30)
    #16 rand_core::SeedableRng::from_rng /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand_core-0.5.0/src/lib.rs:359 (rng_tsan_min_repro-6bc72839c6f31b66+0xd835a)
    #17 rand::rngs::thread::THREAD_RNG_KEY::__init /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.7.0/src/rngs/thread.rs:64 (rng_tsan_min_repro-6bc72839c6f31b66+0xde031)
    #18 core::ops::function::FnOnce::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/ops/function.rs:235 (rng_tsan_min_repro-6bc72839c6f31b66+0xdb1b7)
    #19 std::thread::local::lazy::LazyKeyInner<T>::initialize /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/local.rs:285 (rng_tsan_min_repro-6bc72839c6f31b66+0xd73ae)
    #20 std::thread::local::fast::Key<T>::try_initialize /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/local.rs:426 (rng_tsan_min_repro-6bc72839c6f31b66+0xde5bd)
    #21 std::thread::local::fast::Key<T>::get /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/local.rs:411 (rng_tsan_min_repro-6bc72839c6f31b66+0xde79c)
    #22 rand::rngs::thread::THREAD_RNG_KEY::__getit /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.7.0/<::std::thread::local::__thread_local_inner macros>:28 (rng_tsan_min_repro-6bc72839c6f31b66+0xde279)
    #23 std::thread::local::LocalKey<T>::try_with /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/local.rs:254 (rng_tsan_min_repro-6bc72839c6f31b66+0xde3a1)
    #24 std::thread::local::LocalKey<T>::with /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/local.rs:234 (rng_tsan_min_repro-6bc72839c6f31b66+0xde2ed)
    #25 rand::rngs::thread::thread_rng /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.7.0/src/rngs/thread.rs:81 (rng_tsan_min_repro-6bc72839c6f31b66+0xddefd)
    #26 rng_tsan_min_repro::tests::hammer::{{closure}}::{{closure}} /home/david/src/rng-tsan-min-repo/src/lib.rs:13 (rng_tsan_min_repro-6bc72839c6f31b66+0x20496)
    #27 std::sys_common::backtrace::__rust_begin_short_backtrace /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/sys_common/backtrace.rs:77 (rng_tsan_min_repro-6bc72839c6f31b66+0x27d62)
    #28 std::thread::Builder::spawn_unchecked::{{closure}}::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:470 (rng_tsan_min_repro-6bc72839c6f31b66+0x19202)
    #29 <std::panic::AssertUnwindSafe<F> as core::ops::function::FnOnce<()>>::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/panic.rs:315 (rng_tsan_min_repro-6bc72839c6f31b66+0x1e302)
    #30 std::panicking::try::do_call /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/panicking.rs:296 (rng_tsan_min_repro-6bc72839c6f31b66+0x218b6)
    #31 __rust_maybe_catch_panic /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba//src/libpanic_unwind/lib.rs:80 (rng_tsan_min_repro-6bc72839c6f31b66+0x1692f9)
    #32 std::panic::catch_unwind /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/panic.rs:394 (rng_tsan_min_repro-6bc72839c6f31b66+0x1e342)
    #33 std::thread::Builder::spawn_unchecked::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:469 (rng_tsan_min_repro-6bc72839c6f31b66+0x1902a)
    #34 core::ops::function::FnOnce::call_once{{vtable-shim}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/ops/function.rs:235 (rng_tsan_min_repro-6bc72839c6f31b66+0x16c0d)
    #35 <alloc::boxed::Box<F> as core::ops::function::FnOnce<A>>::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/boxed.rs:770 (rng_tsan_min_repro-6bc72839c6f31b66+0x15bc1e)

  Location is global '<null>' at 0x000000000000 (rng_tsan_min_repro-6bc72839c6f31b66+0x000000c0b050)

  Thread T3 (tid=28329, running) created by thread T1 at:
    #0 pthread_create /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/llvm-project/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:967 (rng_tsan_min_repro-6bc72839c6f31b66+0x2d81b)
    #1 std::sys::unix::thread::Thread::new /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba//src/libstd/sys/unix/thread.rs:67 (rng_tsan_min_repro-6bc72839c6f31b66+0x1682dd)
    #2 std::thread::Builder::spawn /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:382 (rng_tsan_min_repro-6bc72839c6f31b66+0x19282)
    #3 std::thread::spawn /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:613 (rng_tsan_min_repro-6bc72839c6f31b66+0x186ca)
    #4 rng_tsan_min_repro::tests::hammer::{{closure}} /home/david/src/rng-tsan-min-repo/src/lib.rs:12 (rng_tsan_min_repro-6bc72839c6f31b66+0x20572)
    #5 <core::iter::adapters::Map<I,F> as core::iter::traits::iterator::Iterator>::fold::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/adapters/mod.rs:589 (rng_tsan_min_repro-6bc72839c6f31b66+0x213af)
    #6 core::iter::traits::iterator::Iterator::fold::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1783 (rng_tsan_min_repro-6bc72839c6f31b66+0x24b51)
    #7 core::iter::traits::iterator::Iterator::try_fold /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1671 (rng_tsan_min_repro-6bc72839c6f31b66+0x1b694)
    #8 core::iter::traits::iterator::Iterator::fold /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1783 (rng_tsan_min_repro-6bc72839c6f31b66+0x1b580)
    #9 <core::iter::adapters::Map<I,F> as core::iter::traits::iterator::Iterator>::fold /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/adapters/mod.rs:589 (rng_tsan_min_repro-6bc72839c6f31b66+0x21313)
    #10 core::iter::traits::iterator::Iterator::for_each /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:602 (rng_tsan_min_repro-6bc72839c6f31b66+0x211c3)
    #11 <alloc::vec::Vec<T> as alloc::vec::SpecExtend<T,I>>::spec_extend /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/vec.rs:1961 (rng_tsan_min_repro-6bc72839c6f31b66+0x26c1e)
    #12 <alloc::vec::Vec<T> as alloc::vec::SpecExtend<T,I>>::from_iter /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/vec.rs:1944 (rng_tsan_min_repro-6bc72839c6f31b66+0x26e00)
    #13 <alloc::vec::Vec<T> as core::iter::traits::collect::FromIterator<T>>::from_iter /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/vec.rs:1831 (rng_tsan_min_repro-6bc72839c6f31b66+0x275fe)
    #14 core::iter::traits::iterator::Iterator::collect /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1464 (rng_tsan_min_repro-6bc72839c6f31b66+0x21117)
    #15 rng_tsan_min_repro::tests::hammer /home/david/src/rng-tsan-min-repo/src/lib.rs:12 (rng_tsan_min_repro-6bc72839c6f31b66+0x1c8c6)
    #16 rng_tsan_min_repro::tests::hammer::{{closure}} /home/david/src/rng-tsan-min-repo/src/lib.rs:11 (rng_tsan_min_repro-6bc72839c6f31b66+0x20444)
    #17 core::ops::function::FnOnce::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/ops/function.rs:235 (rng_tsan_min_repro-6bc72839c6f31b66+0x16c57)
    #18 <alloc::boxed::Box<F> as core::ops::function::FnOnce<A>>::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/boxed.rs:770 (rng_tsan_min_repro-6bc72839c6f31b66+0xa5b6e)

  Thread T2 (tid=28328, running) created by thread T1 at:
    #0 pthread_create /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/llvm-project/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:967 (rng_tsan_min_repro-6bc72839c6f31b66+0x2d81b)
    #1 std::sys::unix::thread::Thread::new /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba//src/libstd/sys/unix/thread.rs:67 (rng_tsan_min_repro-6bc72839c6f31b66+0x1682dd)
    #2 std::thread::Builder::spawn /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:382 (rng_tsan_min_repro-6bc72839c6f31b66+0x19282)
    #3 std::thread::spawn /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:613 (rng_tsan_min_repro-6bc72839c6f31b66+0x186ca)
    #4 rng_tsan_min_repro::tests::hammer::{{closure}} /home/david/src/rng-tsan-min-repo/src/lib.rs:12 (rng_tsan_min_repro-6bc72839c6f31b66+0x20572)
    #5 <core::iter::adapters::Map<I,F> as core::iter::traits::iterator::Iterator>::fold::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/adapters/mod.rs:589 (rng_tsan_min_repro-6bc72839c6f31b66+0x213af)
    #6 core::iter::traits::iterator::Iterator::fold::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1783 (rng_tsan_min_repro-6bc72839c6f31b66+0x24b51)
    #7 core::iter::traits::iterator::Iterator::try_fold /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1671 (rng_tsan_min_repro-6bc72839c6f31b66+0x1b694)
    #8 core::iter::traits::iterator::Iterator::fold /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1783 (rng_tsan_min_repro-6bc72839c6f31b66+0x1b580)
    #9 <core::iter::adapters::Map<I,F> as core::iter::traits::iterator::Iterator>::fold /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/adapters/mod.rs:589 (rng_tsan_min_repro-6bc72839c6f31b66+0x21313)
    #10 core::iter::traits::iterator::Iterator::for_each /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:602 (rng_tsan_min_repro-6bc72839c6f31b66+0x211c3)
    #11 <alloc::vec::Vec<T> as alloc::vec::SpecExtend<T,I>>::spec_extend /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/vec.rs:1961 (rng_tsan_min_repro-6bc72839c6f31b66+0x26c1e)
    #12 <alloc::vec::Vec<T> as alloc::vec::SpecExtend<T,I>>::from_iter /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/vec.rs:1944 (rng_tsan_min_repro-6bc72839c6f31b66+0x26e00)
    #13 <alloc::vec::Vec<T> as core::iter::traits::collect::FromIterator<T>>::from_iter /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/vec.rs:1831 (rng_tsan_min_repro-6bc72839c6f31b66+0x275fe)
    #14 core::iter::traits::iterator::Iterator::collect /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1464 (rng_tsan_min_repro-6bc72839c6f31b66+0x21117)
    #15 rng_tsan_min_repro::tests::hammer /home/david/src/rng-tsan-min-repo/src/lib.rs:12 (rng_tsan_min_repro-6bc72839c6f31b66+0x1c8c6)
    #16 rng_tsan_min_repro::tests::hammer::{{closure}} /home/david/src/rng-tsan-min-repo/src/lib.rs:11 (rng_tsan_min_repro-6bc72839c6f31b66+0x20444)
    #17 core::ops::function::FnOnce::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/ops/function.rs:235 (rng_tsan_min_repro-6bc72839c6f31b66+0x16c57)
    #18 <alloc::boxed::Box<F> as core::ops::function::FnOnce<A>>::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/boxed.rs:770 (rng_tsan_min_repro-6bc72839c6f31b66+0xa5b6e)

SUMMARY: ThreadSanitizer: data race /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/lazy_static-1.3.0/src/inline_lazy.rs:35 in lazy_static::lazy::Lazy<T>::get
==================
==================
WARNING: ThreadSanitizer: data race (pid=28325)
  Read of size 8 at 0x559290ec6040 by thread T3:
    #0 lazy_static::lazy::Lazy<T>::get /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/lazy_static-1.3.0/src/inline_lazy.rs:35 (rng_tsan_min_repro-6bc72839c6f31b66+0x121c28)
    #1 <c2_chacha::guts::refill_wide::IMPL as core::ops::deref::Deref>::deref::__stability /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/c2-chacha-0.2.2/<::lazy_static::__lazy_static_internal macros>:17 (rng_tsan_min_repro-6bc72839c6f31b66+0x121c28)
    #2 <c2_chacha::guts::refill_wide::IMPL as core::ops::deref::Deref>::deref /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/c2-chacha-0.2.2/<::lazy_static::__lazy_static_internal macros>:19 (rng_tsan_min_repro-6bc72839c6f31b66+0x121c28)
    #3 c2_chacha::guts::refill_wide /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.7.0/<::ppv_lite86::x86_64::dispatch macros>:66 (rng_tsan_min_repro-6bc72839c6f31b66+0xd7ba7)
    #4 c2_chacha::guts::ChaCha::refill4 /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/c2-chacha-0.2.2/src/guts.rs:109 (rng_tsan_min_repro-6bc72839c6f31b66+0xd7ba7)
    #5 <rand_chacha::chacha::ChaCha20Core as rand_core::block::BlockRngCore>::generate /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand_chacha-0.2.1/src/chacha.rs:81 (rng_tsan_min_repro-6bc72839c6f31b66+0xd7ba7)
    #6 <rand::rngs::adapter::reseeding::ReseedingCore<R,Rsdr> as rand_core::block::BlockRngCore>::generate /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.7.0/src/rngs/adapter/reseeding.rs:170 (rng_tsan_min_repro-6bc72839c6f31b66+0xdbd1e)
    #7 rand_core::block::BlockRng<R>::generate_and_set /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand_core-0.5.0/src/block.rs:166 (rng_tsan_min_repro-6bc72839c6f31b66+0xdb7b9)
    #8 <rand_core::block::BlockRng<R> as rand_core::RngCore>::next_u64 /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand_core-0.5.0/src/block.rs:207 (rng_tsan_min_repro-6bc72839c6f31b66+0x24edd)
    #9 <rand::rngs::adapter::reseeding::ReseedingRng<R,Rsdr> as rand_core::RngCore>::next_u64 /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.7.0/src/rngs/adapter/reseeding.rs:116 (rng_tsan_min_repro-6bc72839c6f31b66+0x1ab31)
    #10 <rand::rngs::thread::ThreadRng as rand_core::RngCore>::next_u64 /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.7.0/src/rngs/thread.rs:100 (rng_tsan_min_repro-6bc72839c6f31b66+0x1ab31)
    #11 rand::distributions::integer::<impl rand::distributions::Distribution<u64> for rand::distributions::Standard>::sample /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.7.0/src/distributions/integer.rs:46 (rng_tsan_min_repro-6bc72839c6f31b66+0x1ab31)
    #12 rand::Rng::gen /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.7.0/src/lib.rs:186 (rng_tsan_min_repro-6bc72839c6f31b66+0x21590)
    #13 <rand::distributions::uniform::UniformInt<u64> as rand::distributions::uniform::UniformSampler>::sample_single /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.7.0/src/distributions/uniform.rs:440 (rng_tsan_min_repro-6bc72839c6f31b66+0x1dfce)
    #14 rand::Rng::gen_range /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.7.0/src/lib.rs:218 (rng_tsan_min_repro-6bc72839c6f31b66+0x21621)
    #15 rng_tsan_min_repro::tests::hammer::{{closure}}::{{closure}} /home/david/src/rng-tsan-min-repo/src/lib.rs:13 (rng_tsan_min_repro-6bc72839c6f31b66+0x204c8)
    #16 std::sys_common::backtrace::__rust_begin_short_backtrace /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/sys_common/backtrace.rs:77 (rng_tsan_min_repro-6bc72839c6f31b66+0x27d62)
    #17 std::thread::Builder::spawn_unchecked::{{closure}}::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:470 (rng_tsan_min_repro-6bc72839c6f31b66+0x19202)
    #18 <std::panic::AssertUnwindSafe<F> as core::ops::function::FnOnce<()>>::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/panic.rs:315 (rng_tsan_min_repro-6bc72839c6f31b66+0x1e302)
    #19 std::panicking::try::do_call /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/panicking.rs:296 (rng_tsan_min_repro-6bc72839c6f31b66+0x218b6)
    #20 __rust_maybe_catch_panic /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba//src/libpanic_unwind/lib.rs:80 (rng_tsan_min_repro-6bc72839c6f31b66+0x1692f9)
    #21 std::panic::catch_unwind /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/panic.rs:394 (rng_tsan_min_repro-6bc72839c6f31b66+0x1e342)
    #22 std::thread::Builder::spawn_unchecked::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:469 (rng_tsan_min_repro-6bc72839c6f31b66+0x1902a)
    #23 core::ops::function::FnOnce::call_once{{vtable-shim}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/ops/function.rs:235 (rng_tsan_min_repro-6bc72839c6f31b66+0x16c0d)
    #24 <alloc::boxed::Box<F> as core::ops::function::FnOnce<A>>::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/boxed.rs:770 (rng_tsan_min_repro-6bc72839c6f31b66+0x15bc1e)

  Previous write of size 8 at 0x559290ec6040 by thread T2:
    #0 memcpy /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/llvm-project/compiler-rt/lib/tsan/../sanitizer_common/sanitizer_common_interceptors.inc:801 (rng_tsan_min_repro-6bc72839c6f31b66+0x37ac7)
    #1 core::intrinsics::copy_nonoverlapping /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/intrinsics.rs:1441 (rng_tsan_min_repro-6bc72839c6f31b66+0xe0552)
    #2 core::ptr::swap_nonoverlapping_one /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/ptr/mod.rs:389 (rng_tsan_min_repro-6bc72839c6f31b66+0xe7666)
    #3 core::mem::swap /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/mem/mod.rs:500 (rng_tsan_min_repro-6bc72839c6f31b66+0x123701)
    #4 core::mem::replace /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/mem/mod.rs:628 (rng_tsan_min_repro-6bc72839c6f31b66+0x123c23)
    #5 core::cell::Cell<T>::replace /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/cell.rs:430 (rng_tsan_min_repro-6bc72839c6f31b66+0xe1930)
    #6 core::cell::Cell<T>::set /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/cell.rs:387 (rng_tsan_min_repro-6bc72839c6f31b66+0xe1651)
    #7 lazy_static::lazy::Lazy<T>::get::{{closure}} /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/lazy_static-1.3.0/src/inline_lazy.rs:28 (rng_tsan_min_repro-6bc72839c6f31b66+0xe592d)
    #8 std::sync::once::Once::call_once::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/sync/once.rs:225 (rng_tsan_min_repro-6bc72839c6f31b66+0x1420f0)
    #9 std::sync::once::Once::call_inner /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba//src/libstd/sync/once.rs:392 (rng_tsan_min_repro-6bc72839c6f31b66+0x163077)
    #10 lazy_static::lazy::Lazy<T>::get /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/lazy_static-1.3.0/src/inline_lazy.rs:27 (rng_tsan_min_repro-6bc72839c6f31b66+0x121beb)
    #11 <c2_chacha::guts::refill_wide::IMPL as core::ops::deref::Deref>::deref::__stability /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/c2-chacha-0.2.2/<::lazy_static::__lazy_static_internal macros>:17 (rng_tsan_min_repro-6bc72839c6f31b66+0x121beb)
    #12 <c2_chacha::guts::refill_wide::IMPL as core::ops::deref::Deref>::deref /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/c2-chacha-0.2.2/<::lazy_static::__lazy_static_internal macros>:19 (rng_tsan_min_repro-6bc72839c6f31b66+0x121beb)
    #13 c2_chacha::guts::refill_wide /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.7.0/<::ppv_lite86::x86_64::dispatch macros>:66 (rng_tsan_min_repro-6bc72839c6f31b66+0xd7ba7)
    #14 c2_chacha::guts::ChaCha::refill4 /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/c2-chacha-0.2.2/src/guts.rs:109 (rng_tsan_min_repro-6bc72839c6f31b66+0xd7ba7)
    #15 <rand_chacha::chacha::ChaCha20Core as rand_core::block::BlockRngCore>::generate /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand_chacha-0.2.1/src/chacha.rs:81 (rng_tsan_min_repro-6bc72839c6f31b66+0xd7ba7)
    #16 <rand::rngs::adapter::reseeding::ReseedingCore<R,Rsdr> as rand_core::block::BlockRngCore>::generate /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.7.0/src/rngs/adapter/reseeding.rs:170 (rng_tsan_min_repro-6bc72839c6f31b66+0xdbd1e)
    #17 rand_core::block::BlockRng<R>::generate_and_set /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand_core-0.5.0/src/block.rs:166 (rng_tsan_min_repro-6bc72839c6f31b66+0xdb7b9)
    #18 <rand_core::block::BlockRng<R> as rand_core::RngCore>::next_u64 /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand_core-0.5.0/src/block.rs:207 (rng_tsan_min_repro-6bc72839c6f31b66+0x24edd)
    #19 <rand::rngs::adapter::reseeding::ReseedingRng<R,Rsdr> as rand_core::RngCore>::next_u64 /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.7.0/src/rngs/adapter/reseeding.rs:116 (rng_tsan_min_repro-6bc72839c6f31b66+0x1ab31)
    #20 <rand::rngs::thread::ThreadRng as rand_core::RngCore>::next_u64 /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.7.0/src/rngs/thread.rs:100 (rng_tsan_min_repro-6bc72839c6f31b66+0x1ab31)
    #21 rand::distributions::integer::<impl rand::distributions::Distribution<u64> for rand::distributions::Standard>::sample /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.7.0/src/distributions/integer.rs:46 (rng_tsan_min_repro-6bc72839c6f31b66+0x1ab31)
    #22 rand::Rng::gen /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.7.0/src/lib.rs:186 (rng_tsan_min_repro-6bc72839c6f31b66+0x21590)
    #23 <rand::distributions::uniform::UniformInt<u64> as rand::distributions::uniform::UniformSampler>::sample_single /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.7.0/src/distributions/uniform.rs:440 (rng_tsan_min_repro-6bc72839c6f31b66+0x1dfce)
    #24 rand::Rng::gen_range /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.7.0/src/lib.rs:218 (rng_tsan_min_repro-6bc72839c6f31b66+0x21621)
    #25 rng_tsan_min_repro::tests::hammer::{{closure}}::{{closure}} /home/david/src/rng-tsan-min-repo/src/lib.rs:13 (rng_tsan_min_repro-6bc72839c6f31b66+0x204c8)
    #26 std::sys_common::backtrace::__rust_begin_short_backtrace /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/sys_common/backtrace.rs:77 (rng_tsan_min_repro-6bc72839c6f31b66+0x27d62)
    #27 std::thread::Builder::spawn_unchecked::{{closure}}::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:470 (rng_tsan_min_repro-6bc72839c6f31b66+0x19202)
    #28 <std::panic::AssertUnwindSafe<F> as core::ops::function::FnOnce<()>>::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/panic.rs:315 (rng_tsan_min_repro-6bc72839c6f31b66+0x1e302)
    #29 std::panicking::try::do_call /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/panicking.rs:296 (rng_tsan_min_repro-6bc72839c6f31b66+0x218b6)
    #30 __rust_maybe_catch_panic /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba//src/libpanic_unwind/lib.rs:80 (rng_tsan_min_repro-6bc72839c6f31b66+0x1692f9)
    #31 std::panic::catch_unwind /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/panic.rs:394 (rng_tsan_min_repro-6bc72839c6f31b66+0x1e342)
    #32 std::thread::Builder::spawn_unchecked::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:469 (rng_tsan_min_repro-6bc72839c6f31b66+0x1902a)
    #33 core::ops::function::FnOnce::call_once{{vtable-shim}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/ops/function.rs:235 (rng_tsan_min_repro-6bc72839c6f31b66+0x16c0d)
    #34 <alloc::boxed::Box<F> as core::ops::function::FnOnce<A>>::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/boxed.rs:770 (rng_tsan_min_repro-6bc72839c6f31b66+0x15bc1e)

  Location is global '<null>' at 0x000000000000 (rng_tsan_min_repro-6bc72839c6f31b66+0x000000c0b040)

  Thread T3 (tid=28329, running) created by thread T1 at:
    #0 pthread_create /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/llvm-project/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:967 (rng_tsan_min_repro-6bc72839c6f31b66+0x2d81b)
    #1 std::sys::unix::thread::Thread::new /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba//src/libstd/sys/unix/thread.rs:67 (rng_tsan_min_repro-6bc72839c6f31b66+0x1682dd)
    #2 std::thread::Builder::spawn /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:382 (rng_tsan_min_repro-6bc72839c6f31b66+0x19282)
    #3 std::thread::spawn /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:613 (rng_tsan_min_repro-6bc72839c6f31b66+0x186ca)
    #4 rng_tsan_min_repro::tests::hammer::{{closure}} /home/david/src/rng-tsan-min-repo/src/lib.rs:12 (rng_tsan_min_repro-6bc72839c6f31b66+0x20572)
    #5 <core::iter::adapters::Map<I,F> as core::iter::traits::iterator::Iterator>::fold::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/adapters/mod.rs:589 (rng_tsan_min_repro-6bc72839c6f31b66+0x213af)
    #6 core::iter::traits::iterator::Iterator::fold::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1783 (rng_tsan_min_repro-6bc72839c6f31b66+0x24b51)
    #7 core::iter::traits::iterator::Iterator::try_fold /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1671 (rng_tsan_min_repro-6bc72839c6f31b66+0x1b694)
    #8 core::iter::traits::iterator::Iterator::fold /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1783 (rng_tsan_min_repro-6bc72839c6f31b66+0x1b580)
    #9 <core::iter::adapters::Map<I,F> as core::iter::traits::iterator::Iterator>::fold /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/adapters/mod.rs:589 (rng_tsan_min_repro-6bc72839c6f31b66+0x21313)
    #10 core::iter::traits::iterator::Iterator::for_each /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:602 (rng_tsan_min_repro-6bc72839c6f31b66+0x211c3)
    #11 <alloc::vec::Vec<T> as alloc::vec::SpecExtend<T,I>>::spec_extend /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/vec.rs:1961 (rng_tsan_min_repro-6bc72839c6f31b66+0x26c1e)
    #12 <alloc::vec::Vec<T> as alloc::vec::SpecExtend<T,I>>::from_iter /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/vec.rs:1944 (rng_tsan_min_repro-6bc72839c6f31b66+0x26e00)
    #13 <alloc::vec::Vec<T> as core::iter::traits::collect::FromIterator<T>>::from_iter /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/vec.rs:1831 (rng_tsan_min_repro-6bc72839c6f31b66+0x275fe)
    #14 core::iter::traits::iterator::Iterator::collect /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1464 (rng_tsan_min_repro-6bc72839c6f31b66+0x21117)
    #15 rng_tsan_min_repro::tests::hammer /home/david/src/rng-tsan-min-repo/src/lib.rs:12 (rng_tsan_min_repro-6bc72839c6f31b66+0x1c8c6)
    #16 rng_tsan_min_repro::tests::hammer::{{closure}} /home/david/src/rng-tsan-min-repo/src/lib.rs:11 (rng_tsan_min_repro-6bc72839c6f31b66+0x20444)
    #17 core::ops::function::FnOnce::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/ops/function.rs:235 (rng_tsan_min_repro-6bc72839c6f31b66+0x16c57)
    #18 <alloc::boxed::Box<F> as core::ops::function::FnOnce<A>>::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/boxed.rs:770 (rng_tsan_min_repro-6bc72839c6f31b66+0xa5b6e)

  Thread T2 (tid=28328, finished) created by thread T1 at:
    #0 pthread_create /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/llvm-project/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:967 (rng_tsan_min_repro-6bc72839c6f31b66+0x2d81b)
    #1 std::sys::unix::thread::Thread::new /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba//src/libstd/sys/unix/thread.rs:67 (rng_tsan_min_repro-6bc72839c6f31b66+0x1682dd)
    #2 std::thread::Builder::spawn /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:382 (rng_tsan_min_repro-6bc72839c6f31b66+0x19282)
    #3 std::thread::spawn /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:613 (rng_tsan_min_repro-6bc72839c6f31b66+0x186ca)
    #4 rng_tsan_min_repro::tests::hammer::{{closure}} /home/david/src/rng-tsan-min-repo/src/lib.rs:12 (rng_tsan_min_repro-6bc72839c6f31b66+0x20572)
    #5 <core::iter::adapters::Map<I,F> as core::iter::traits::iterator::Iterator>::fold::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/adapters/mod.rs:589 (rng_tsan_min_repro-6bc72839c6f31b66+0x213af)
    #6 core::iter::traits::iterator::Iterator::fold::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1783 (rng_tsan_min_repro-6bc72839c6f31b66+0x24b51)
    #7 core::iter::traits::iterator::Iterator::try_fold /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1671 (rng_tsan_min_repro-6bc72839c6f31b66+0x1b694)
    #8 core::iter::traits::iterator::Iterator::fold /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1783 (rng_tsan_min_repro-6bc72839c6f31b66+0x1b580)
    #9 <core::iter::adapters::Map<I,F> as core::iter::traits::iterator::Iterator>::fold /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/adapters/mod.rs:589 (rng_tsan_min_repro-6bc72839c6f31b66+0x21313)
    #10 core::iter::traits::iterator::Iterator::for_each /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:602 (rng_tsan_min_repro-6bc72839c6f31b66+0x211c3)
    #11 <alloc::vec::Vec<T> as alloc::vec::SpecExtend<T,I>>::spec_extend /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/vec.rs:1961 (rng_tsan_min_repro-6bc72839c6f31b66+0x26c1e)
    #12 <alloc::vec::Vec<T> as alloc::vec::SpecExtend<T,I>>::from_iter /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/vec.rs:1944 (rng_tsan_min_repro-6bc72839c6f31b66+0x26e00)
    #13 <alloc::vec::Vec<T> as core::iter::traits::collect::FromIterator<T>>::from_iter /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/vec.rs:1831 (rng_tsan_min_repro-6bc72839c6f31b66+0x275fe)
    #14 core::iter::traits::iterator::Iterator::collect /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1464 (rng_tsan_min_repro-6bc72839c6f31b66+0x21117)
    #15 rng_tsan_min_repro::tests::hammer /home/david/src/rng-tsan-min-repo/src/lib.rs:12 (rng_tsan_min_repro-6bc72839c6f31b66+0x1c8c6)
    #16 rng_tsan_min_repro::tests::hammer::{{closure}} /home/david/src/rng-tsan-min-repo/src/lib.rs:11 (rng_tsan_min_repro-6bc72839c6f31b66+0x20444)
    #17 core::ops::function::FnOnce::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/ops/function.rs:235 (rng_tsan_min_repro-6bc72839c6f31b66+0x16c57)
    #18 <alloc::boxed::Box<F> as core::ops::function::FnOnce<A>>::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/boxed.rs:770 (rng_tsan_min_repro-6bc72839c6f31b66+0xa5b6e)

SUMMARY: ThreadSanitizer: data race /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/lazy_static-1.3.0/src/inline_lazy.rs:35 in lazy_static::lazy::Lazy<T>::get
==================
==================
WARNING: ThreadSanitizer: data race (pid=28325)
  Read of size 8 at 0x559290ec6040 by thread T4:
    #0 lazy_static::lazy::Lazy<T>::get /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/lazy_static-1.3.0/src/inline_lazy.rs:35 (rng_tsan_min_repro-6bc72839c6f31b66+0x121c28)
    #1 <c2_chacha::guts::refill_wide::IMPL as core::ops::deref::Deref>::deref::__stability /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/c2-chacha-0.2.2/<::lazy_static::__lazy_static_internal macros>:17 (rng_tsan_min_repro-6bc72839c6f31b66+0x121c28)
    #2 <c2_chacha::guts::refill_wide::IMPL as core::ops::deref::Deref>::deref /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/c2-chacha-0.2.2/<::lazy_static::__lazy_static_internal macros>:19 (rng_tsan_min_repro-6bc72839c6f31b66+0x121c28)
    #3 c2_chacha::guts::refill_wide /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.7.0/<::ppv_lite86::x86_64::dispatch macros>:66 (rng_tsan_min_repro-6bc72839c6f31b66+0xd7ba7)
    #4 c2_chacha::guts::ChaCha::refill4 /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/c2-chacha-0.2.2/src/guts.rs:109 (rng_tsan_min_repro-6bc72839c6f31b66+0xd7ba7)
    #5 <rand_chacha::chacha::ChaCha20Core as rand_core::block::BlockRngCore>::generate /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand_chacha-0.2.1/src/chacha.rs:81 (rng_tsan_min_repro-6bc72839c6f31b66+0xd7ba7)
    #6 <rand::rngs::adapter::reseeding::ReseedingCore<R,Rsdr> as rand_core::block::BlockRngCore>::generate /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.7.0/src/rngs/adapter/reseeding.rs:170 (rng_tsan_min_repro-6bc72839c6f31b66+0xdbd1e)
    #7 rand_core::block::BlockRng<R>::generate_and_set /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand_core-0.5.0/src/block.rs:166 (rng_tsan_min_repro-6bc72839c6f31b66+0xdb7b9)
    #8 <rand_core::block::BlockRng<R> as rand_core::RngCore>::next_u64 /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand_core-0.5.0/src/block.rs:207 (rng_tsan_min_repro-6bc72839c6f31b66+0x24edd)
    #9 <rand::rngs::adapter::reseeding::ReseedingRng<R,Rsdr> as rand_core::RngCore>::next_u64 /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.7.0/src/rngs/adapter/reseeding.rs:116 (rng_tsan_min_repro-6bc72839c6f31b66+0x1ab31)
    #10 <rand::rngs::thread::ThreadRng as rand_core::RngCore>::next_u64 /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.7.0/src/rngs/thread.rs:100 (rng_tsan_min_repro-6bc72839c6f31b66+0x1ab31)
    #11 rand::distributions::integer::<impl rand::distributions::Distribution<u64> for rand::distributions::Standard>::sample /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.7.0/src/distributions/integer.rs:46 (rng_tsan_min_repro-6bc72839c6f31b66+0x1ab31)
    #12 rand::Rng::gen /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.7.0/src/lib.rs:186 (rng_tsan_min_repro-6bc72839c6f31b66+0x21590)
    #13 <rand::distributions::uniform::UniformInt<u64> as rand::distributions::uniform::UniformSampler>::sample_single /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.7.0/src/distributions/uniform.rs:440 (rng_tsan_min_repro-6bc72839c6f31b66+0x1dfce)
    #14 rand::Rng::gen_range /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.7.0/src/lib.rs:218 (rng_tsan_min_repro-6bc72839c6f31b66+0x21621)
    #15 rng_tsan_min_repro::tests::hammer::{{closure}}::{{closure}} /home/david/src/rng-tsan-min-repo/src/lib.rs:13 (rng_tsan_min_repro-6bc72839c6f31b66+0x204c8)
    #16 std::sys_common::backtrace::__rust_begin_short_backtrace /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/sys_common/backtrace.rs:77 (rng_tsan_min_repro-6bc72839c6f31b66+0x27d62)
    #17 std::thread::Builder::spawn_unchecked::{{closure}}::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:470 (rng_tsan_min_repro-6bc72839c6f31b66+0x19202)
    #18 <std::panic::AssertUnwindSafe<F> as core::ops::function::FnOnce<()>>::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/panic.rs:315 (rng_tsan_min_repro-6bc72839c6f31b66+0x1e302)
    #19 std::panicking::try::do_call /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/panicking.rs:296 (rng_tsan_min_repro-6bc72839c6f31b66+0x218b6)
    #20 __rust_maybe_catch_panic /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba//src/libpanic_unwind/lib.rs:80 (rng_tsan_min_repro-6bc72839c6f31b66+0x1692f9)
    #21 std::panic::catch_unwind /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/panic.rs:394 (rng_tsan_min_repro-6bc72839c6f31b66+0x1e342)
    #22 std::thread::Builder::spawn_unchecked::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:469 (rng_tsan_min_repro-6bc72839c6f31b66+0x1902a)
    #23 core::ops::function::FnOnce::call_once{{vtable-shim}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/ops/function.rs:235 (rng_tsan_min_repro-6bc72839c6f31b66+0x16c0d)
    #24 <alloc::boxed::Box<F> as core::ops::function::FnOnce<A>>::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/boxed.rs:770 (rng_tsan_min_repro-6bc72839c6f31b66+0x15bc1e)

  Previous write of size 8 at 0x559290ec6040 by thread T2:
    #0 memcpy /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/llvm-project/compiler-rt/lib/tsan/../sanitizer_common/sanitizer_common_interceptors.inc:801 (rng_tsan_min_repro-6bc72839c6f31b66+0x37ac7)
    #1 core::intrinsics::copy_nonoverlapping /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/intrinsics.rs:1441 (rng_tsan_min_repro-6bc72839c6f31b66+0xe0552)
    #2 core::ptr::swap_nonoverlapping_one /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/ptr/mod.rs:389 (rng_tsan_min_repro-6bc72839c6f31b66+0xe7666)
    #3 core::mem::swap /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/mem/mod.rs:500 (rng_tsan_min_repro-6bc72839c6f31b66+0x123701)
    #4 core::mem::replace /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/mem/mod.rs:628 (rng_tsan_min_repro-6bc72839c6f31b66+0x123c23)
    #5 core::cell::Cell<T>::replace /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/cell.rs:430 (rng_tsan_min_repro-6bc72839c6f31b66+0xe1930)
    #6 core::cell::Cell<T>::set /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/cell.rs:387 (rng_tsan_min_repro-6bc72839c6f31b66+0xe1651)
    #7 lazy_static::lazy::Lazy<T>::get::{{closure}} /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/lazy_static-1.3.0/src/inline_lazy.rs:28 (rng_tsan_min_repro-6bc72839c6f31b66+0xe592d)
    #8 std::sync::once::Once::call_once::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/sync/once.rs:225 (rng_tsan_min_repro-6bc72839c6f31b66+0x1420f0)
    #9 std::sync::once::Once::call_inner /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba//src/libstd/sync/once.rs:392 (rng_tsan_min_repro-6bc72839c6f31b66+0x163077)
    #10 lazy_static::lazy::Lazy<T>::get /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/lazy_static-1.3.0/src/inline_lazy.rs:27 (rng_tsan_min_repro-6bc72839c6f31b66+0x121beb)
    #11 <c2_chacha::guts::refill_wide::IMPL as core::ops::deref::Deref>::deref::__stability /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/c2-chacha-0.2.2/<::lazy_static::__lazy_static_internal macros>:17 (rng_tsan_min_repro-6bc72839c6f31b66+0x121beb)
    #12 <c2_chacha::guts::refill_wide::IMPL as core::ops::deref::Deref>::deref /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/c2-chacha-0.2.2/<::lazy_static::__lazy_static_internal macros>:19 (rng_tsan_min_repro-6bc72839c6f31b66+0x121beb)
    #13 c2_chacha::guts::refill_wide /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.7.0/<::ppv_lite86::x86_64::dispatch macros>:66 (rng_tsan_min_repro-6bc72839c6f31b66+0xd7ba7)
    #14 c2_chacha::guts::ChaCha::refill4 /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/c2-chacha-0.2.2/src/guts.rs:109 (rng_tsan_min_repro-6bc72839c6f31b66+0xd7ba7)
    #15 <rand_chacha::chacha::ChaCha20Core as rand_core::block::BlockRngCore>::generate /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand_chacha-0.2.1/src/chacha.rs:81 (rng_tsan_min_repro-6bc72839c6f31b66+0xd7ba7)
    #16 <rand::rngs::adapter::reseeding::ReseedingCore<R,Rsdr> as rand_core::block::BlockRngCore>::generate /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.7.0/src/rngs/adapter/reseeding.rs:170 (rng_tsan_min_repro-6bc72839c6f31b66+0xdbd1e)
    #17 rand_core::block::BlockRng<R>::generate_and_set /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand_core-0.5.0/src/block.rs:166 (rng_tsan_min_repro-6bc72839c6f31b66+0xdb7b9)
    #18 <rand_core::block::BlockRng<R> as rand_core::RngCore>::next_u64 /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand_core-0.5.0/src/block.rs:207 (rng_tsan_min_repro-6bc72839c6f31b66+0x24edd)
    #19 <rand::rngs::adapter::reseeding::ReseedingRng<R,Rsdr> as rand_core::RngCore>::next_u64 /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.7.0/src/rngs/adapter/reseeding.rs:116 (rng_tsan_min_repro-6bc72839c6f31b66+0x1ab31)
    #20 <rand::rngs::thread::ThreadRng as rand_core::RngCore>::next_u64 /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.7.0/src/rngs/thread.rs:100 (rng_tsan_min_repro-6bc72839c6f31b66+0x1ab31)
    #21 rand::distributions::integer::<impl rand::distributions::Distribution<u64> for rand::distributions::Standard>::sample /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.7.0/src/distributions/integer.rs:46 (rng_tsan_min_repro-6bc72839c6f31b66+0x1ab31)
    #22 rand::Rng::gen /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.7.0/src/lib.rs:186 (rng_tsan_min_repro-6bc72839c6f31b66+0x21590)
    #23 <rand::distributions::uniform::UniformInt<u64> as rand::distributions::uniform::UniformSampler>::sample_single /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.7.0/src/distributions/uniform.rs:440 (rng_tsan_min_repro-6bc72839c6f31b66+0x1dfce)
    #24 rand::Rng::gen_range /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.7.0/src/lib.rs:218 (rng_tsan_min_repro-6bc72839c6f31b66+0x21621)
    #25 rng_tsan_min_repro::tests::hammer::{{closure}}::{{closure}} /home/david/src/rng-tsan-min-repo/src/lib.rs:13 (rng_tsan_min_repro-6bc72839c6f31b66+0x204c8)
    #26 std::sys_common::backtrace::__rust_begin_short_backtrace /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/sys_common/backtrace.rs:77 (rng_tsan_min_repro-6bc72839c6f31b66+0x27d62)
    #27 std::thread::Builder::spawn_unchecked::{{closure}}::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:470 (rng_tsan_min_repro-6bc72839c6f31b66+0x19202)
    #28 <std::panic::AssertUnwindSafe<F> as core::ops::function::FnOnce<()>>::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/panic.rs:315 (rng_tsan_min_repro-6bc72839c6f31b66+0x1e302)
    #29 std::panicking::try::do_call /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/panicking.rs:296 (rng_tsan_min_repro-6bc72839c6f31b66+0x218b6)
    #30 __rust_maybe_catch_panic /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba//src/libpanic_unwind/lib.rs:80 (rng_tsan_min_repro-6bc72839c6f31b66+0x1692f9)
    #31 std::panic::catch_unwind /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/panic.rs:394 (rng_tsan_min_repro-6bc72839c6f31b66+0x1e342)
    #32 std::thread::Builder::spawn_unchecked::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:469 (rng_tsan_min_repro-6bc72839c6f31b66+0x1902a)
    #33 core::ops::function::FnOnce::call_once{{vtable-shim}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/ops/function.rs:235 (rng_tsan_min_repro-6bc72839c6f31b66+0x16c0d)
    #34 <alloc::boxed::Box<F> as core::ops::function::FnOnce<A>>::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/boxed.rs:770 (rng_tsan_min_repro-6bc72839c6f31b66+0x15bc1e)

  Location is global '<null>' at 0x000000000000 (rng_tsan_min_repro-6bc72839c6f31b66+0x000000c0b040)

  Thread T4 (tid=28330, running) created by thread T1 at:
    #0 pthread_create /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/llvm-project/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:967 (rng_tsan_min_repro-6bc72839c6f31b66+0x2d81b)
    #1 std::sys::unix::thread::Thread::new /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba//src/libstd/sys/unix/thread.rs:67 (rng_tsan_min_repro-6bc72839c6f31b66+0x1682dd)
    #2 std::thread::Builder::spawn /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:382 (rng_tsan_min_repro-6bc72839c6f31b66+0x19282)
    #3 std::thread::spawn /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:613 (rng_tsan_min_repro-6bc72839c6f31b66+0x186ca)
    #4 rng_tsan_min_repro::tests::hammer::{{closure}} /home/david/src/rng-tsan-min-repo/src/lib.rs:12 (rng_tsan_min_repro-6bc72839c6f31b66+0x20572)
    #5 <core::iter::adapters::Map<I,F> as core::iter::traits::iterator::Iterator>::fold::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/adapters/mod.rs:589 (rng_tsan_min_repro-6bc72839c6f31b66+0x213af)
    #6 core::iter::traits::iterator::Iterator::fold::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1783 (rng_tsan_min_repro-6bc72839c6f31b66+0x24b51)
    #7 core::iter::traits::iterator::Iterator::try_fold /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1671 (rng_tsan_min_repro-6bc72839c6f31b66+0x1b694)
    #8 core::iter::traits::iterator::Iterator::fold /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1783 (rng_tsan_min_repro-6bc72839c6f31b66+0x1b580)
    #9 <core::iter::adapters::Map<I,F> as core::iter::traits::iterator::Iterator>::fold /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/adapters/mod.rs:589 (rng_tsan_min_repro-6bc72839c6f31b66+0x21313)
    #10 core::iter::traits::iterator::Iterator::for_each /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:602 (rng_tsan_min_repro-6bc72839c6f31b66+0x211c3)
    #11 <alloc::vec::Vec<T> as alloc::vec::SpecExtend<T,I>>::spec_extend /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/vec.rs:1961 (rng_tsan_min_repro-6bc72839c6f31b66+0x26c1e)
    #12 <alloc::vec::Vec<T> as alloc::vec::SpecExtend<T,I>>::from_iter /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/vec.rs:1944 (rng_tsan_min_repro-6bc72839c6f31b66+0x26e00)
    #13 <alloc::vec::Vec<T> as core::iter::traits::collect::FromIterator<T>>::from_iter /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/vec.rs:1831 (rng_tsan_min_repro-6bc72839c6f31b66+0x275fe)
    #14 core::iter::traits::iterator::Iterator::collect /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1464 (rng_tsan_min_repro-6bc72839c6f31b66+0x21117)
    #15 rng_tsan_min_repro::tests::hammer /home/david/src/rng-tsan-min-repo/src/lib.rs:12 (rng_tsan_min_repro-6bc72839c6f31b66+0x1c8c6)
    #16 rng_tsan_min_repro::tests::hammer::{{closure}} /home/david/src/rng-tsan-min-repo/src/lib.rs:11 (rng_tsan_min_repro-6bc72839c6f31b66+0x20444)
    #17 core::ops::function::FnOnce::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/ops/function.rs:235 (rng_tsan_min_repro-6bc72839c6f31b66+0x16c57)
    #18 <alloc::boxed::Box<F> as core::ops::function::FnOnce<A>>::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/boxed.rs:770 (rng_tsan_min_repro-6bc72839c6f31b66+0xa5b6e)

  Thread T2 (tid=28328, finished) created by thread T1 at:
    #0 pthread_create /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/llvm-project/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:967 (rng_tsan_min_repro-6bc72839c6f31b66+0x2d81b)
    #1 std::sys::unix::thread::Thread::new /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba//src/libstd/sys/unix/thread.rs:67 (rng_tsan_min_repro-6bc72839c6f31b66+0x1682dd)
    #2 std::thread::Builder::spawn /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:382 (rng_tsan_min_repro-6bc72839c6f31b66+0x19282)
    #3 std::thread::spawn /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libstd/thread/mod.rs:613 (rng_tsan_min_repro-6bc72839c6f31b66+0x186ca)
    #4 rng_tsan_min_repro::tests::hammer::{{closure}} /home/david/src/rng-tsan-min-repo/src/lib.rs:12 (rng_tsan_min_repro-6bc72839c6f31b66+0x20572)
    #5 <core::iter::adapters::Map<I,F> as core::iter::traits::iterator::Iterator>::fold::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/adapters/mod.rs:589 (rng_tsan_min_repro-6bc72839c6f31b66+0x213af)
    #6 core::iter::traits::iterator::Iterator::fold::{{closure}} /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1783 (rng_tsan_min_repro-6bc72839c6f31b66+0x24b51)
    #7 core::iter::traits::iterator::Iterator::try_fold /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1671 (rng_tsan_min_repro-6bc72839c6f31b66+0x1b694)
    #8 core::iter::traits::iterator::Iterator::fold /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1783 (rng_tsan_min_repro-6bc72839c6f31b66+0x1b580)
    #9 <core::iter::adapters::Map<I,F> as core::iter::traits::iterator::Iterator>::fold /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/adapters/mod.rs:589 (rng_tsan_min_repro-6bc72839c6f31b66+0x21313)
    #10 core::iter::traits::iterator::Iterator::for_each /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:602 (rng_tsan_min_repro-6bc72839c6f31b66+0x211c3)
    #11 <alloc::vec::Vec<T> as alloc::vec::SpecExtend<T,I>>::spec_extend /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/vec.rs:1961 (rng_tsan_min_repro-6bc72839c6f31b66+0x26c1e)
    #12 <alloc::vec::Vec<T> as alloc::vec::SpecExtend<T,I>>::from_iter /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/vec.rs:1944 (rng_tsan_min_repro-6bc72839c6f31b66+0x26e00)
    #13 <alloc::vec::Vec<T> as core::iter::traits::collect::FromIterator<T>>::from_iter /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/vec.rs:1831 (rng_tsan_min_repro-6bc72839c6f31b66+0x275fe)
    #14 core::iter::traits::iterator::Iterator::collect /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/iter/traits/iterator.rs:1464 (rng_tsan_min_repro-6bc72839c6f31b66+0x21117)
    #15 rng_tsan_min_repro::tests::hammer /home/david/src/rng-tsan-min-repo/src/lib.rs:12 (rng_tsan_min_repro-6bc72839c6f31b66+0x1c8c6)
    #16 rng_tsan_min_repro::tests::hammer::{{closure}} /home/david/src/rng-tsan-min-repo/src/lib.rs:11 (rng_tsan_min_repro-6bc72839c6f31b66+0x20444)
    #17 core::ops::function::FnOnce::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/libcore/ops/function.rs:235 (rng_tsan_min_repro-6bc72839c6f31b66+0x16c57)
    #18 <alloc::boxed::Box<F> as core::ops::function::FnOnce<A>>::call_once /rustc/4560cb830fce63fcffdc4558f4281aaac6a3a1ba/src/liballoc/boxed.rs:770 (rng_tsan_min_repro-6bc72839c6f31b66+0xa5b6e)

SUMMARY: ThreadSanitizer: data race /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/lazy_static-1.3.0/src/inline_lazy.rs:35 in lazy_static::lazy::Lazy<T>::get
==================
test tests::hammer ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out

ThreadSanitizer: reported 3 warnings
error: test failed, to rerun pass '--lib'
