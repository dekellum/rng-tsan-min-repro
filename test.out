    Finished dev [unoptimized + debuginfo] target(s) in 0.02s
     Running target/debug/deps/rng_tsan_min_repro-d2a2cf43270035ef

running 1 test
==================
WARNING: ThreadSanitizer: data race (pid=10981)
  Read of size 8 at 0x5574faff7988 by thread T3:
    #0 lazy_static::lazy::Lazy<T>::get /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/lazy_static-1.3.0/src/inline_lazy.rs:35 (rng_tsan_min_repro-d2a2cf43270035ef+0x18c40)
    #1 <rng_tsan_min_repro::tests::LAZY_STATE as core::ops::deref::Deref>::deref::__stability /home/david/src/rng-tsan-min-repro/<::lazy_static::__lazy_static_internal macros>:17 (rng_tsan_min_repro-d2a2cf43270035ef+0x18c40)
    #2 <rng_tsan_min_repro::tests::LAZY_STATE as core::ops::deref::Deref>::deref /home/david/src/rng-tsan-min-repro/<::lazy_static::__lazy_static_internal macros>:19 (rng_tsan_min_repro-d2a2cf43270035ef+0x18c40)
    #3 rng_tsan_min_repro::tests::hammer::{{closure}}::{{closure}} /home/david/src/rng-tsan-min-repro/src/lib.rs:16 (rng_tsan_min_repro-d2a2cf43270035ef+0x1675b)
    #4 std::sys_common::backtrace::__rust_begin_short_backtrace /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libstd/sys_common/backtrace.rs:77 (rng_tsan_min_repro-d2a2cf43270035ef+0x176e9)
    #5 std::thread::Builder::spawn_unchecked::{{closure}}::{{closure}} /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libstd/thread/mod.rs:470 (rng_tsan_min_repro-d2a2cf43270035ef+0x160a9)
    #6 <std::panic::AssertUnwindSafe<F> as core::ops::function::FnOnce<()>>::call_once /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libstd/panic.rs:315 (rng_tsan_min_repro-d2a2cf43270035ef+0x21b49)
    #7 std::panicking::try::do_call /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libstd/panicking.rs:296 (rng_tsan_min_repro-d2a2cf43270035ef+0x28feb)
    #8 __rust_maybe_catch_panic /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c//src/libpanic_unwind/lib.rs:80 (rng_tsan_min_repro-d2a2cf43270035ef+0xe72a9)
    #9 std::panic::catch_unwind /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libstd/panic.rs:394 (rng_tsan_min_repro-d2a2cf43270035ef+0x21ba9)
    #10 std::thread::Builder::spawn_unchecked::{{closure}} /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libstd/thread/mod.rs:469 (rng_tsan_min_repro-d2a2cf43270035ef+0x15e9d)
    #11 core::ops::function::FnOnce::call_once{{vtable-shim}} /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/ops/function.rs:235 (rng_tsan_min_repro-d2a2cf43270035ef+0x1d109)
    #12 <alloc::boxed::Box<F> as core::ops::function::FnOnce<A>>::call_once /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/liballoc/boxed.rs:770 (rng_tsan_min_repro-d2a2cf43270035ef+0xd9fce)

  Previous write of size 8 at 0x5574faff7988 by thread T2:
    #0 memcpy /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/llvm-project/compiler-rt/lib/tsan/../sanitizer_common/sanitizer_common_interceptors.inc:801 (rng_tsan_min_repro-d2a2cf43270035ef+0x3ace7)
    #1 core::intrinsics::copy_nonoverlapping /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/intrinsics.rs:1441 (rng_tsan_min_repro-d2a2cf43270035ef+0x229f6)
    #2 core::ptr::swap_nonoverlapping_one /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/ptr/mod.rs:389 (rng_tsan_min_repro-d2a2cf43270035ef+0x1be8b)
    #3 core::mem::swap /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/mem/mod.rs:500 (rng_tsan_min_repro-d2a2cf43270035ef+0x243cd)
    #4 core::mem::replace /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/mem/mod.rs:628 (rng_tsan_min_repro-d2a2cf43270035ef+0x24c7c)
    #5 core::cell::Cell<T>::replace /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/cell.rs:430 (rng_tsan_min_repro-d2a2cf43270035ef+0x1797c)
    #6 core::cell::Cell<T>::set /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/cell.rs:387 (rng_tsan_min_repro-d2a2cf43270035ef+0x17831)
    #7 lazy_static::lazy::Lazy<T>::get::{{closure}} /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/lazy_static-1.3.0/src/inline_lazy.rs:28 (rng_tsan_min_repro-d2a2cf43270035ef+0x1cee3)
    #8 std::sync::once::Once::call_once::{{closure}} /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libstd/sync/once.rs:225 (rng_tsan_min_repro-d2a2cf43270035ef+0x1a384)
    #9 std::sync::once::Once::call_inner /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c//src/libstd/sync/once.rs:392 (rng_tsan_min_repro-d2a2cf43270035ef+0xe13c7)
    #10 lazy_static::lazy::Lazy<T>::get /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/lazy_static-1.3.0/src/inline_lazy.rs:27 (rng_tsan_min_repro-d2a2cf43270035ef+0x18c07)
    #11 <rng_tsan_min_repro::tests::LAZY_STATE as core::ops::deref::Deref>::deref::__stability /home/david/src/rng-tsan-min-repro/<::lazy_static::__lazy_static_internal macros>:17 (rng_tsan_min_repro-d2a2cf43270035ef+0x18c07)
    #12 <rng_tsan_min_repro::tests::LAZY_STATE as core::ops::deref::Deref>::deref /home/david/src/rng-tsan-min-repro/<::lazy_static::__lazy_static_internal macros>:19 (rng_tsan_min_repro-d2a2cf43270035ef+0x18c07)
    #13 rng_tsan_min_repro::tests::hammer::{{closure}}::{{closure}} /home/david/src/rng-tsan-min-repro/src/lib.rs:16 (rng_tsan_min_repro-d2a2cf43270035ef+0x1675b)
    #14 std::sys_common::backtrace::__rust_begin_short_backtrace /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libstd/sys_common/backtrace.rs:77 (rng_tsan_min_repro-d2a2cf43270035ef+0x176e9)
    #15 std::thread::Builder::spawn_unchecked::{{closure}}::{{closure}} /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libstd/thread/mod.rs:470 (rng_tsan_min_repro-d2a2cf43270035ef+0x160a9)
    #16 <std::panic::AssertUnwindSafe<F> as core::ops::function::FnOnce<()>>::call_once /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libstd/panic.rs:315 (rng_tsan_min_repro-d2a2cf43270035ef+0x21b49)
    #17 std::panicking::try::do_call /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libstd/panicking.rs:296 (rng_tsan_min_repro-d2a2cf43270035ef+0x28feb)
    #18 __rust_maybe_catch_panic /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c//src/libpanic_unwind/lib.rs:80 (rng_tsan_min_repro-d2a2cf43270035ef+0xe72a9)
    #19 std::panic::catch_unwind /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libstd/panic.rs:394 (rng_tsan_min_repro-d2a2cf43270035ef+0x21ba9)
    #20 std::thread::Builder::spawn_unchecked::{{closure}} /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libstd/thread/mod.rs:469 (rng_tsan_min_repro-d2a2cf43270035ef+0x15e9d)
    #21 core::ops::function::FnOnce::call_once{{vtable-shim}} /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/ops/function.rs:235 (rng_tsan_min_repro-d2a2cf43270035ef+0x1d109)
    #22 <alloc::boxed::Box<F> as core::ops::function::FnOnce<A>>::call_once /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/liballoc/boxed.rs:770 (rng_tsan_min_repro-d2a2cf43270035ef+0xd9fce)

  Location is global '<null>' at 0x000000000000 (rng_tsan_min_repro-d2a2cf43270035ef+0x000000154988)

  Thread T3 (tid=10989, running) created by thread T1 at:
    #0 pthread_create /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/llvm-project/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:967 (rng_tsan_min_repro-d2a2cf43270035ef+0x30a3b)
    #1 std::sys::unix::thread::Thread::new /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c//src/libstd/sys/unix/thread.rs:67 (rng_tsan_min_repro-d2a2cf43270035ef+0xe65ed)
    #2 std::thread::Builder::spawn /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libstd/thread/mod.rs:382 (rng_tsan_min_repro-d2a2cf43270035ef+0x16146)
    #3 std::thread::spawn /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libstd/thread/mod.rs:613 (rng_tsan_min_repro-d2a2cf43270035ef+0x1552c)
    #4 rng_tsan_min_repro::tests::hammer::{{closure}} /home/david/src/rng-tsan-min-repro/src/lib.rs:15 (rng_tsan_min_repro-d2a2cf43270035ef+0x16854)
    #5 <core::iter::adapters::Map<I,F> as core::iter::traits::iterator::Iterator>::fold::{{closure}} /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/iter/adapters/mod.rs:589 (rng_tsan_min_repro-d2a2cf43270035ef+0x20235)
    #6 core::iter::traits::iterator::Iterator::fold::{{closure}} /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/iter/traits/iterator.rs:1783 (rng_tsan_min_repro-d2a2cf43270035ef+0x1a987)
    #7 core::iter::traits::iterator::Iterator::try_fold /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/iter/traits/iterator.rs:1671 (rng_tsan_min_repro-d2a2cf43270035ef+0x18991)
    #8 core::iter::traits::iterator::Iterator::fold /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/iter/traits/iterator.rs:1783 (rng_tsan_min_repro-d2a2cf43270035ef+0x18883)
    #9 <core::iter::adapters::Map<I,F> as core::iter::traits::iterator::Iterator>::fold /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/iter/adapters/mod.rs:589 (rng_tsan_min_repro-d2a2cf43270035ef+0x20189)
    #10 core::iter::traits::iterator::Iterator::for_each /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/iter/traits/iterator.rs:602 (rng_tsan_min_repro-d2a2cf43270035ef+0x20003)
    #11 <alloc::vec::Vec<T> as alloc::vec::SpecExtend<T,I>>::spec_extend /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/liballoc/vec.rs:1961 (rng_tsan_min_repro-d2a2cf43270035ef+0x26f38)
    #12 <alloc::vec::Vec<T> as alloc::vec::SpecExtend<T,I>>::from_iter /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/liballoc/vec.rs:1944 (rng_tsan_min_repro-d2a2cf43270035ef+0x2711e)
    #13 <alloc::vec::Vec<T> as core::iter::traits::collect::FromIterator<T>>::from_iter /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/liballoc/vec.rs:1831 (rng_tsan_min_repro-d2a2cf43270035ef+0x2793a)
    #14 core::iter::traits::iterator::Iterator::collect /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/iter/traits/iterator.rs:1464 (rng_tsan_min_repro-d2a2cf43270035ef+0x1ff4f)
    #15 rng_tsan_min_repro::tests::hammer /home/david/src/rng-tsan-min-repro/src/lib.rs:15 (rng_tsan_min_repro-d2a2cf43270035ef+0x18d44)
    #16 rng_tsan_min_repro::tests::hammer::{{closure}} /home/david/src/rng-tsan-min-repro/src/lib.rs:14 (rng_tsan_min_repro-d2a2cf43270035ef+0x166f4)
    #17 core::ops::function::FnOnce::call_once /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/ops/function.rs:235 (rng_tsan_min_repro-d2a2cf43270035ef+0x1d377)
    #18 <alloc::boxed::Box<F> as core::ops::function::FnOnce<A>>::call_once /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/liballoc/boxed.rs:770 (rng_tsan_min_repro-d2a2cf43270035ef+0xa767e)

  Thread T2 (tid=10988, finished) created by thread T1 at:
    #0 pthread_create /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/llvm-project/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:967 (rng_tsan_min_repro-d2a2cf43270035ef+0x30a3b)
    #1 std::sys::unix::thread::Thread::new /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c//src/libstd/sys/unix/thread.rs:67 (rng_tsan_min_repro-d2a2cf43270035ef+0xe65ed)
    #2 std::thread::Builder::spawn /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libstd/thread/mod.rs:382 (rng_tsan_min_repro-d2a2cf43270035ef+0x16146)
    #3 std::thread::spawn /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libstd/thread/mod.rs:613 (rng_tsan_min_repro-d2a2cf43270035ef+0x1552c)
    #4 rng_tsan_min_repro::tests::hammer::{{closure}} /home/david/src/rng-tsan-min-repro/src/lib.rs:15 (rng_tsan_min_repro-d2a2cf43270035ef+0x16854)
    #5 <core::iter::adapters::Map<I,F> as core::iter::traits::iterator::Iterator>::fold::{{closure}} /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/iter/adapters/mod.rs:589 (rng_tsan_min_repro-d2a2cf43270035ef+0x20235)
    #6 core::iter::traits::iterator::Iterator::fold::{{closure}} /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/iter/traits/iterator.rs:1783 (rng_tsan_min_repro-d2a2cf43270035ef+0x1a987)
    #7 core::iter::traits::iterator::Iterator::try_fold /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/iter/traits/iterator.rs:1671 (rng_tsan_min_repro-d2a2cf43270035ef+0x18991)
    #8 core::iter::traits::iterator::Iterator::fold /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/iter/traits/iterator.rs:1783 (rng_tsan_min_repro-d2a2cf43270035ef+0x18883)
    #9 <core::iter::adapters::Map<I,F> as core::iter::traits::iterator::Iterator>::fold /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/iter/adapters/mod.rs:589 (rng_tsan_min_repro-d2a2cf43270035ef+0x20189)
    #10 core::iter::traits::iterator::Iterator::for_each /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/iter/traits/iterator.rs:602 (rng_tsan_min_repro-d2a2cf43270035ef+0x20003)
    #11 <alloc::vec::Vec<T> as alloc::vec::SpecExtend<T,I>>::spec_extend /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/liballoc/vec.rs:1961 (rng_tsan_min_repro-d2a2cf43270035ef+0x26f38)
    #12 <alloc::vec::Vec<T> as alloc::vec::SpecExtend<T,I>>::from_iter /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/liballoc/vec.rs:1944 (rng_tsan_min_repro-d2a2cf43270035ef+0x2711e)
    #13 <alloc::vec::Vec<T> as core::iter::traits::collect::FromIterator<T>>::from_iter /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/liballoc/vec.rs:1831 (rng_tsan_min_repro-d2a2cf43270035ef+0x2793a)
    #14 core::iter::traits::iterator::Iterator::collect /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/iter/traits/iterator.rs:1464 (rng_tsan_min_repro-d2a2cf43270035ef+0x1ff4f)
    #15 rng_tsan_min_repro::tests::hammer /home/david/src/rng-tsan-min-repro/src/lib.rs:15 (rng_tsan_min_repro-d2a2cf43270035ef+0x18d44)
    #16 rng_tsan_min_repro::tests::hammer::{{closure}} /home/david/src/rng-tsan-min-repro/src/lib.rs:14 (rng_tsan_min_repro-d2a2cf43270035ef+0x166f4)
    #17 core::ops::function::FnOnce::call_once /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/ops/function.rs:235 (rng_tsan_min_repro-d2a2cf43270035ef+0x1d377)
    #18 <alloc::boxed::Box<F> as core::ops::function::FnOnce<A>>::call_once /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/liballoc/boxed.rs:770 (rng_tsan_min_repro-d2a2cf43270035ef+0xa767e)

SUMMARY: ThreadSanitizer: data race /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/lazy_static-1.3.0/src/inline_lazy.rs:35 in lazy_static::lazy::Lazy<T>::get
==================
==================
WARNING: ThreadSanitizer: data race (pid=10981)
  Read of size 8 at 0x5574faff7990 by thread T3:
    #0 rng_tsan_min_repro::tests::hammer::{{closure}}::{{closure}} /home/david/src/rng-tsan-min-repro/src/lib.rs:16 (rng_tsan_min_repro-d2a2cf43270035ef+0x16771)
    #1 std::sys_common::backtrace::__rust_begin_short_backtrace /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libstd/sys_common/backtrace.rs:77 (rng_tsan_min_repro-d2a2cf43270035ef+0x176e9)
    #2 std::thread::Builder::spawn_unchecked::{{closure}}::{{closure}} /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libstd/thread/mod.rs:470 (rng_tsan_min_repro-d2a2cf43270035ef+0x160a9)
    #3 <std::panic::AssertUnwindSafe<F> as core::ops::function::FnOnce<()>>::call_once /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libstd/panic.rs:315 (rng_tsan_min_repro-d2a2cf43270035ef+0x21b49)
    #4 std::panicking::try::do_call /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libstd/panicking.rs:296 (rng_tsan_min_repro-d2a2cf43270035ef+0x28feb)
    #5 __rust_maybe_catch_panic /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c//src/libpanic_unwind/lib.rs:80 (rng_tsan_min_repro-d2a2cf43270035ef+0xe72a9)
    #6 std::panic::catch_unwind /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libstd/panic.rs:394 (rng_tsan_min_repro-d2a2cf43270035ef+0x21ba9)
    #7 std::thread::Builder::spawn_unchecked::{{closure}} /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libstd/thread/mod.rs:469 (rng_tsan_min_repro-d2a2cf43270035ef+0x15e9d)
    #8 core::ops::function::FnOnce::call_once{{vtable-shim}} /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/ops/function.rs:235 (rng_tsan_min_repro-d2a2cf43270035ef+0x1d109)
    #9 <alloc::boxed::Box<F> as core::ops::function::FnOnce<A>>::call_once /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/liballoc/boxed.rs:770 (rng_tsan_min_repro-d2a2cf43270035ef+0xd9fce)

  Previous write of size 8 at 0x5574faff7990 by thread T2:
    #0 memcpy /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/llvm-project/compiler-rt/lib/tsan/../sanitizer_common/sanitizer_common_interceptors.inc:801 (rng_tsan_min_repro-d2a2cf43270035ef+0x3ace7)
    #1 core::intrinsics::copy_nonoverlapping /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/intrinsics.rs:1441 (rng_tsan_min_repro-d2a2cf43270035ef+0x229f6)
    #2 core::ptr::swap_nonoverlapping_one /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/ptr/mod.rs:389 (rng_tsan_min_repro-d2a2cf43270035ef+0x1be8b)
    #3 core::mem::swap /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/mem/mod.rs:500 (rng_tsan_min_repro-d2a2cf43270035ef+0x243cd)
    #4 core::mem::replace /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/mem/mod.rs:628 (rng_tsan_min_repro-d2a2cf43270035ef+0x24c7c)
    #5 core::cell::Cell<T>::replace /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/cell.rs:430 (rng_tsan_min_repro-d2a2cf43270035ef+0x1797c)
    #6 core::cell::Cell<T>::set /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/cell.rs:387 (rng_tsan_min_repro-d2a2cf43270035ef+0x17831)
    #7 lazy_static::lazy::Lazy<T>::get::{{closure}} /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/lazy_static-1.3.0/src/inline_lazy.rs:28 (rng_tsan_min_repro-d2a2cf43270035ef+0x1cee3)
    #8 std::sync::once::Once::call_once::{{closure}} /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libstd/sync/once.rs:225 (rng_tsan_min_repro-d2a2cf43270035ef+0x1a384)
    #9 std::sync::once::Once::call_inner /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c//src/libstd/sync/once.rs:392 (rng_tsan_min_repro-d2a2cf43270035ef+0xe13c7)
    #10 lazy_static::lazy::Lazy<T>::get /home/david/.cargo/registry/src/github.com-1ecc6299db9ec823/lazy_static-1.3.0/src/inline_lazy.rs:27 (rng_tsan_min_repro-d2a2cf43270035ef+0x18c07)
    #11 <rng_tsan_min_repro::tests::LAZY_STATE as core::ops::deref::Deref>::deref::__stability /home/david/src/rng-tsan-min-repro/<::lazy_static::__lazy_static_internal macros>:17 (rng_tsan_min_repro-d2a2cf43270035ef+0x18c07)
    #12 <rng_tsan_min_repro::tests::LAZY_STATE as core::ops::deref::Deref>::deref /home/david/src/rng-tsan-min-repro/<::lazy_static::__lazy_static_internal macros>:19 (rng_tsan_min_repro-d2a2cf43270035ef+0x18c07)
    #13 rng_tsan_min_repro::tests::hammer::{{closure}}::{{closure}} /home/david/src/rng-tsan-min-repro/src/lib.rs:16 (rng_tsan_min_repro-d2a2cf43270035ef+0x1675b)
    #14 std::sys_common::backtrace::__rust_begin_short_backtrace /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libstd/sys_common/backtrace.rs:77 (rng_tsan_min_repro-d2a2cf43270035ef+0x176e9)
    #15 std::thread::Builder::spawn_unchecked::{{closure}}::{{closure}} /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libstd/thread/mod.rs:470 (rng_tsan_min_repro-d2a2cf43270035ef+0x160a9)
    #16 <std::panic::AssertUnwindSafe<F> as core::ops::function::FnOnce<()>>::call_once /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libstd/panic.rs:315 (rng_tsan_min_repro-d2a2cf43270035ef+0x21b49)
    #17 std::panicking::try::do_call /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libstd/panicking.rs:296 (rng_tsan_min_repro-d2a2cf43270035ef+0x28feb)
    #18 __rust_maybe_catch_panic /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c//src/libpanic_unwind/lib.rs:80 (rng_tsan_min_repro-d2a2cf43270035ef+0xe72a9)
    #19 std::panic::catch_unwind /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libstd/panic.rs:394 (rng_tsan_min_repro-d2a2cf43270035ef+0x21ba9)
    #20 std::thread::Builder::spawn_unchecked::{{closure}} /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libstd/thread/mod.rs:469 (rng_tsan_min_repro-d2a2cf43270035ef+0x15e9d)
    #21 core::ops::function::FnOnce::call_once{{vtable-shim}} /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/ops/function.rs:235 (rng_tsan_min_repro-d2a2cf43270035ef+0x1d109)
    #22 <alloc::boxed::Box<F> as core::ops::function::FnOnce<A>>::call_once /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/liballoc/boxed.rs:770 (rng_tsan_min_repro-d2a2cf43270035ef+0xd9fce)

  Location is global '<null>' at 0x000000000000 (rng_tsan_min_repro-d2a2cf43270035ef+0x000000154990)

  Thread T3 (tid=10989, running) created by thread T1 at:
    #0 pthread_create /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/llvm-project/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:967 (rng_tsan_min_repro-d2a2cf43270035ef+0x30a3b)
    #1 std::sys::unix::thread::Thread::new /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c//src/libstd/sys/unix/thread.rs:67 (rng_tsan_min_repro-d2a2cf43270035ef+0xe65ed)
    #2 std::thread::Builder::spawn /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libstd/thread/mod.rs:382 (rng_tsan_min_repro-d2a2cf43270035ef+0x16146)
    #3 std::thread::spawn /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libstd/thread/mod.rs:613 (rng_tsan_min_repro-d2a2cf43270035ef+0x1552c)
    #4 rng_tsan_min_repro::tests::hammer::{{closure}} /home/david/src/rng-tsan-min-repro/src/lib.rs:15 (rng_tsan_min_repro-d2a2cf43270035ef+0x16854)
    #5 <core::iter::adapters::Map<I,F> as core::iter::traits::iterator::Iterator>::fold::{{closure}} /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/iter/adapters/mod.rs:589 (rng_tsan_min_repro-d2a2cf43270035ef+0x20235)
    #6 core::iter::traits::iterator::Iterator::fold::{{closure}} /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/iter/traits/iterator.rs:1783 (rng_tsan_min_repro-d2a2cf43270035ef+0x1a987)
    #7 core::iter::traits::iterator::Iterator::try_fold /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/iter/traits/iterator.rs:1671 (rng_tsan_min_repro-d2a2cf43270035ef+0x18991)
    #8 core::iter::traits::iterator::Iterator::fold /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/iter/traits/iterator.rs:1783 (rng_tsan_min_repro-d2a2cf43270035ef+0x18883)
    #9 <core::iter::adapters::Map<I,F> as core::iter::traits::iterator::Iterator>::fold /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/iter/adapters/mod.rs:589 (rng_tsan_min_repro-d2a2cf43270035ef+0x20189)
    #10 core::iter::traits::iterator::Iterator::for_each /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/iter/traits/iterator.rs:602 (rng_tsan_min_repro-d2a2cf43270035ef+0x20003)
    #11 <alloc::vec::Vec<T> as alloc::vec::SpecExtend<T,I>>::spec_extend /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/liballoc/vec.rs:1961 (rng_tsan_min_repro-d2a2cf43270035ef+0x26f38)
    #12 <alloc::vec::Vec<T> as alloc::vec::SpecExtend<T,I>>::from_iter /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/liballoc/vec.rs:1944 (rng_tsan_min_repro-d2a2cf43270035ef+0x2711e)
    #13 <alloc::vec::Vec<T> as core::iter::traits::collect::FromIterator<T>>::from_iter /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/liballoc/vec.rs:1831 (rng_tsan_min_repro-d2a2cf43270035ef+0x2793a)
    #14 core::iter::traits::iterator::Iterator::collect /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/iter/traits/iterator.rs:1464 (rng_tsan_min_repro-d2a2cf43270035ef+0x1ff4f)
    #15 rng_tsan_min_repro::tests::hammer /home/david/src/rng-tsan-min-repro/src/lib.rs:15 (rng_tsan_min_repro-d2a2cf43270035ef+0x18d44)
    #16 rng_tsan_min_repro::tests::hammer::{{closure}} /home/david/src/rng-tsan-min-repro/src/lib.rs:14 (rng_tsan_min_repro-d2a2cf43270035ef+0x166f4)
    #17 core::ops::function::FnOnce::call_once /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/ops/function.rs:235 (rng_tsan_min_repro-d2a2cf43270035ef+0x1d377)
    #18 <alloc::boxed::Box<F> as core::ops::function::FnOnce<A>>::call_once /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/liballoc/boxed.rs:770 (rng_tsan_min_repro-d2a2cf43270035ef+0xa767e)

  Thread T2 (tid=10988, finished) created by thread T1 at:
    #0 pthread_create /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/llvm-project/compiler-rt/lib/tsan/rtl/tsan_interceptors.cc:967 (rng_tsan_min_repro-d2a2cf43270035ef+0x30a3b)
    #1 std::sys::unix::thread::Thread::new /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c//src/libstd/sys/unix/thread.rs:67 (rng_tsan_min_repro-d2a2cf43270035ef+0xe65ed)
    #2 std::thread::Builder::spawn /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libstd/thread/mod.rs:382 (rng_tsan_min_repro-d2a2cf43270035ef+0x16146)
    #3 std::thread::spawn /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libstd/thread/mod.rs:613 (rng_tsan_min_repro-d2a2cf43270035ef+0x1552c)
    #4 rng_tsan_min_repro::tests::hammer::{{closure}} /home/david/src/rng-tsan-min-repro/src/lib.rs:15 (rng_tsan_min_repro-d2a2cf43270035ef+0x16854)
    #5 <core::iter::adapters::Map<I,F> as core::iter::traits::iterator::Iterator>::fold::{{closure}} /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/iter/adapters/mod.rs:589 (rng_tsan_min_repro-d2a2cf43270035ef+0x20235)
    #6 core::iter::traits::iterator::Iterator::fold::{{closure}} /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/iter/traits/iterator.rs:1783 (rng_tsan_min_repro-d2a2cf43270035ef+0x1a987)
    #7 core::iter::traits::iterator::Iterator::try_fold /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/iter/traits/iterator.rs:1671 (rng_tsan_min_repro-d2a2cf43270035ef+0x18991)
    #8 core::iter::traits::iterator::Iterator::fold /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/iter/traits/iterator.rs:1783 (rng_tsan_min_repro-d2a2cf43270035ef+0x18883)
    #9 <core::iter::adapters::Map<I,F> as core::iter::traits::iterator::Iterator>::fold /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/iter/adapters/mod.rs:589 (rng_tsan_min_repro-d2a2cf43270035ef+0x20189)
    #10 core::iter::traits::iterator::Iterator::for_each /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/iter/traits/iterator.rs:602 (rng_tsan_min_repro-d2a2cf43270035ef+0x20003)
    #11 <alloc::vec::Vec<T> as alloc::vec::SpecExtend<T,I>>::spec_extend /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/liballoc/vec.rs:1961 (rng_tsan_min_repro-d2a2cf43270035ef+0x26f38)
    #12 <alloc::vec::Vec<T> as alloc::vec::SpecExtend<T,I>>::from_iter /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/liballoc/vec.rs:1944 (rng_tsan_min_repro-d2a2cf43270035ef+0x2711e)
    #13 <alloc::vec::Vec<T> as core::iter::traits::collect::FromIterator<T>>::from_iter /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/liballoc/vec.rs:1831 (rng_tsan_min_repro-d2a2cf43270035ef+0x2793a)
    #14 core::iter::traits::iterator::Iterator::collect /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/iter/traits/iterator.rs:1464 (rng_tsan_min_repro-d2a2cf43270035ef+0x1ff4f)
    #15 rng_tsan_min_repro::tests::hammer /home/david/src/rng-tsan-min-repro/src/lib.rs:15 (rng_tsan_min_repro-d2a2cf43270035ef+0x18d44)
    #16 rng_tsan_min_repro::tests::hammer::{{closure}} /home/david/src/rng-tsan-min-repro/src/lib.rs:14 (rng_tsan_min_repro-d2a2cf43270035ef+0x166f4)
    #17 core::ops::function::FnOnce::call_once /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/libcore/ops/function.rs:235 (rng_tsan_min_repro-d2a2cf43270035ef+0x1d377)
    #18 <alloc::boxed::Box<F> as core::ops::function::FnOnce<A>>::call_once /rustc/8a58268b5ad9c4a240be349a633069d48991eb0c/src/liballoc/boxed.rs:770 (rng_tsan_min_repro-d2a2cf43270035ef+0xa767e)

SUMMARY: ThreadSanitizer: data race /home/david/src/rng-tsan-min-repro/src/lib.rs:16 in rng_tsan_min_repro::tests::hammer::{{closure}}::{{closure}}
==================
test tests::hammer ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out

ThreadSanitizer: reported 2 warnings
error: test failed, to rerun pass '--lib'
